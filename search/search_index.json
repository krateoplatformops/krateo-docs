{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":"<p>Krateo Platformops is an open source tool platform that gives users the capability to create any desired resource on basically any infrastructure they'd like. Be it a K8s cluster, microservice, application, pipeline, database or anything else, Krateo has got your back. The only requirement is for the resource to be descriptible via a YAML file representing the resource's desired state (rings a bell? \ud83d\ude09).</p> <p>Krateo allows for:</p> <ul> <li>Creating any kind of resources within and outside the Kubernetes cluster it runs on: whilst Krateo runs as a Deployment in a Kubernetes cluster, it can also create resources outside the cluster. You can use Krateo to create anything from new Kubernetes clusters, Logstash pipelines, Docker registries, API gateways, and many others.</li> <li>Focusing on the management of services: Krateo frees the user from most of the burden of cluster management, giving them the ability to entirely focus on the services that must be run. This results a phenomenal user experience that drastically reduces wastes of time.</li> <li>Single-handedly monitoring and controlling resources: Krateo also acts as a centralized control plane, letting users monitor anything ranging from CI/CD pipelines to pod statuses and open tickets on your JIRA. All the information you need is present on a single page -- you'll never have to guess the correct dashboard ever again.</li> </ul>"},{"location":"#our-mission","title":"Our mission","text":"<p>With Krateo, we aim to simplify the existing toolchain with a simple-to-use, complete and modular platform that allows for creating resources on any infrastructure. We see Krateo as a powerful tool that improves the workflow of teams by defining clear roles in which the infrastructure team creates the resource templates needed by the developers, and the developers are the final users that use those templates and can manage the lifecycle of the created resources from a simple, unified dashboard.</p> <p>In our vision, Krateo is:</p> <ul> <li>a self-service platform, where users can autonomously choose what to create and where;</li> <li>a complete controlplane that eases and centralizes many processes, putting all the relevant information in a single page rather than distributing it on tens of different locations;</li> <li>a multi-cloud provider tool: it works with all the major cloud providers and with on-prem installations;</li> <li>either managed or easily installable on your existing Kubernetes cluster.</li> </ul>"},{"location":"glossary/","title":"Glossary","text":"<p>Krateo PlatformOps is an open source tool, based on CNCF projects such as Kubernetes and Crossplane, that gives users the capability to create any desired resource on basically any infrastructure they'd like.</p> <p>Therefore, Krateo PlatformOps introduces and uses the following terms.</p>"},{"location":"glossary/#module","title":"Module","text":"<p>A Krateo module is basically a Crossplane Composition - it configures how Crossplane should compose resources into a higher level \u201ccomposite resource\u201d. </p> <p>A Composition tells Crossplane \u201cwhen someone creates composite resource X, you should respond by creating resources Y and Z\u201d.</p>"},{"location":"glossary/#managed-resource","title":"Managed Resource","text":"<p>Managed resources are granular, high fidelity representations of a resource in an external system.</p> <p>Note</p> <p>Managed resources are what Crossplane enables platform teams to compose into higher level composite resources, forming an opinionated platform API. </p> <p>They\u2019re the building blocks of Crossplane.</p>"},{"location":"glossary/#provider","title":"Provider","text":"<p>A Provider is a bundle set of managed resources and their respective controllers to allow Crossplane to provision the respective infrastructure resource.</p> <p>Note</p> <p>A provider it\u2019s a bundle set of managed resources and the related controllers deployed as Pod.</p> <p>It will install the CRDs for the resources it manages and watch on them. </p> <p>Each instance of a managed resource will make the controller create and maintain a resource.</p>"},{"location":"glossary/#package","title":"Package","text":"<p>Packages extend Krateo, either with support for new kinds of modules, or support for new kinds of managed resources. There are two types of Krateo package; modules and providers.</p>"},{"location":"how-to-install/","title":"How to install Krateo PlatformOps","text":"<p>To install Krateo PlatformOps on your cluster all you need is the Krateo CLI tool.</p> <p>You can install Krateo CLI tool for your favorite OS, follow these instructions.</p> <p>With Krateo CLI tool ready to go, open a terminal and type this command:</p> <pre><code>krateo init\n</code></pre> <p>Note</p> <p>If you want to see what <code>krateo init</code>command does, you can look at it's sequence diagram.</p> <p>you will see something like this:</p> <pre><code>[done] \u221a crossplane 1.10.0 installed               \n[wait] \u288e\u2801 installing package provider-helm (v0.12.0)... (6s)\n</code></pre> <p>Once the core components are installed, you will be asked to specify the domain where the dashboard will be reachable.</p> <pre><code>[done] \u221a crossplane 1.10.0 installed               \n[done] \u221a package provider-helm (v0.12.0) installed               \n[done] \u221a package provider-kubernetes (v0.5.0) installed               \n[done] \u221a package provider-git (v1.2.0) installed               \n[done] \u221a package provider-argocd-token (v1.3.0) installed               \n[done] \u221a role bindings 'provider-helm-admin-binding' created                 \n[done] \u221a role bindings 'provider-kubernetes-admin-binding' created                 \n[done] \u221a core module installed            \n &gt; domain :           \n</code></pre> <p>Type your domain (i.e. krateo.site) and hit the  key.</p> <pre><code>[done] \u221a crossplane 1.10.0 installed               \n[done] \u221a package provider-helm (v0.12.0) installed               \n[done] \u221a package provider-kubernetes (v0.5.0) installed               \n[done] \u221a package provider-git (v1.2.0) installed               \n[done] \u221a package provider-argocd-token (v1.3.0) installed               \n[done] \u221a role bindings 'provider-helm-admin-binding' created                 \n[done] \u221a role bindings 'provider-kubernetes-admin-binding' created                 \n[done] \u221a core module installed            \n &gt; domain : krateo.site\n[done] \u221a core module claims installed                \n[wait] \u2808\u2871 waiting for Krateo readiness ... (10s)\n</code></pre> <p>After a while the CLI tool will print the full URI to your Krateo PlatformOps dashboard. </p>"},{"location":"requirements/","title":"Requirements","text":"<p>To correctly install Krateo PlatformOps fulfill the following requirements:</p> <ul> <li> <p>CNCF Certified Kubernetes cluster</p> </li> <li> <p>Kubernetes minimal requirements:</p> <ul> <li>3 workers, each with 2vCPUs and 4GiB RAM \u2013 no storage required</li> <li>Ability to expose service of type LoadBalancer (https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/)</li> </ul> </li> <li> <p>Networking requirements</p> <ul> <li>Ability to reach https://github.com , https://charts.krateo.io , https://charts.konghq.com , xpkg.upbound.io , ghcr.io, docker.io</li> </ul> </li> <li> <p>Wildcar domain</p> <ul> <li>Krateo will add the 'app' and 'api' prefix to the wildcard domain</li> </ul> </li> </ul> <p>If you meet this requirement, you can proceed with the installation.</p>"},{"location":"app/app-dashboard/","title":"Dashboard","text":"<p>In the dashboard page, you have a summary of your apps and their status.</p>"},{"location":"app/app-dashboard/#top-bar","title":"Top bar","text":"<ul> <li>templates: is the total number of templates you have imported.</li> <li>deployments: is the total number of deployments.</li> <li>users: (not yet implemented) is the total number of users.</li> <li>endpoints: is the total number of endpoints.</li> </ul>"},{"location":"app/app-dashboard/#action-needed","title":"Action needed","text":"<p>There are three steps to complete the tutorial:</p> <ul> <li>add endpoint</li> <li>import template</li> <li>create deployment</li> </ul> <p>every successive step is blocked until the previous step is completed.</p>"},{"location":"app/app-deployments/","title":"Deployments","text":"<p>Here you have the list of deployments created with Krateo.</p>"},{"location":"app/app-deployments/#deployment-card","title":"Deployment card","text":"<p>Every deployment card has the following information:</p> <ul> <li>icon</li> <li>title</li> <li>description</li> <li>tags</li> <li>creation date</li> </ul> <p>If you want to see the details of a deployment, click on the card.</p>"},{"location":"app/app-deployments/#deployment-details","title":"Deployment details","text":"<p>Every deployment page has the following tabs in this order:</p> <ul> <li>overview</li> <li>custom tabs</li> <li>events</li> <li>values</li> <li>settings</li> </ul>"},{"location":"app/app-deployments/#overview","title":"Overview","text":"<p>This tab shows the following information:</p> <ul> <li>description</li> <li>links</li> </ul>"},{"location":"app/app-deployments/#events","title":"Events","text":"<p>This tab shows the events of the deployment. Every logs has</p> <ul> <li>source</li> <li>reason</li> <li>timestamp</li> <li>level (info, warning, error, debug)</li> <li>message</li> </ul>"},{"location":"app/app-deployments/#values","title":"Values","text":"<p>This tab shows the deployment.yaml file.</p>"},{"location":"app/app-deployments/#settings","title":"Settings","text":"<p>From this tab you can delete the deployment. This action is irreversible, but Krateo asks to you a confirm before delete deployment.</p>"},{"location":"app/app-deployments/#custom-tabs","title":"Custom tabs","text":"<p>You can customize the deployment page with custom plugins.</p> <p>Currently, Krateo has the following plugins:</p> <ul> <li>argocd</li> <li>kubernetes</li> <li>doc</li> <li>pipeline</li> <li>capi</li> <li>keptn</li> </ul>"},{"location":"app/app-deployments/#argocd","title":"Argocd","text":"<p>This plugin shows the ArgoCD application details, required values are</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: argocd</li> <li><code>value</code>: argocd application name</li> </ul>"},{"location":"app/app-deployments/#kubernetes","title":"Kubernetes","text":"<p>This plugin shows the kubernetes components, selected by label, required values are</p> <ul> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: kubernetes</li> <li><code>value</code>: label selector, eg. <code>app.kubernetes.io/name=nginx</code>. you can also use the deploymentId (value: deploymentId)</li> </ul>"},{"location":"app/app-deployments/#doc","title":"Doc","text":"<p>This plugin shows the markdown file from the repository, required values are</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: doc</li> <li><code>values</code>: list of files to render</li> </ul> <p>The form must be like this:   <code>[organization_name][repository_name]file_name</code></p> <p>For example:   <code>'[krateoplatformops][guest-fire-smoked21]README.md'</code>   (please note the single quotes around the value).</p> <p>This plugins supports:</p> <ul> <li>GitHub</li> <li>Bitbucket (on-premise)</li> </ul>"},{"location":"app/app-deployments/#pipeline","title":"Pipeline","text":"<p>This plugin shows the list of last ten pipeline execution, required values are</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: doc</li> <li><code>values</code>: list of pipelines to fetch</li> </ul> <p>The form must be like this:   <code>[organization_name][repository_name]file_name</code></p> <p>For example:   <code>'[krateoplatformops][guest-fire-smoked21]Build Docker image for every commit'</code>   (please note the single quotes around the value).</p> <p>This plugins supports:</p> <ul> <li>GitHub actions</li> <li>Jenkins</li> </ul>"},{"location":"app/app-deployments/#capi-cluster-api","title":"Capi (cluster api)","text":"<p>This plugin shows the cluster api config file, required values are</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: capi</li> <li><code>value</code>: cluster id</li> </ul>"},{"location":"app/app-deployments/#keptn","title":"Keptn","text":"<p>This plugin shows the keptn delivery status, required values are</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>icon</code>: fontawesome icon</li> <li><code>name</code>: name of the tab</li> <li><code>type</code>: keptn</li> <li><code>value</code>: keptn project name + keptn service name</li> </ul> <p>eg. <code>'[krateo]demo'</code> (please note the single quotes around the value).</p>"},{"location":"app/app-deployments/#deploymentyaml","title":"Deployment.yaml","text":""},{"location":"app/app-deployments/#example","title":"Example","text":"<pre><code># {{=&lt;% %&gt;=}}\n---\napiVersion: deployment.krateo.io/v1alpha1\nkind: FireworksApp\nmetadata:\n  name: &lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;-fireworksapp\nspec:\n  owner: mauro\n  title: &lt;% name %&gt;\n  description: Fireworks App Deployment\n  icon: 'fa-solid fa-fire'\n  tags:\n    - fireworks\n    - template\n    - krateo\n    - katy perry\n  links:\n    - url: https://github.com/&lt;% organizationName %&gt;/&lt;% repositoryName %&gt;\n      title: &lt;% organizationName %&gt;/&lt;% repositoryName %&gt;\n      icon: 'fa-brands fa-git'\n  plugins:\n    - name: resources\n      value: &lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;-fireworksapp\n      type: argocd\n      icon: fa-solid fa-diagram-project\n      endpointName: argocd\n    - name: documentation\n      values:\n        - '[krateoplatformops][&lt;% owner %&gt;-fire-&lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;]README.md'\n      type: doc\n      icon: fa-solid fa-book\n      endpointName: github\n    - name: kubernetes\n      value: deploymentId\n      type: kubernetes\n      icon: fa-brands fa-docker\n    - name: pipelines\n      values:\n        - '[krateoplatformops][&lt;% owner %&gt;-fire-&lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;]Build Docker image for every commit'\n      type: pipeline\n      icon: fa-solid fa-person-running\n      endpointName: github\n  values:\n    replicas: &lt;% replicas %&gt;\n    organizationName: krateoplatformops\n    repositoryName: &lt;% owner %&gt;-fire-&lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;\n    destinationApiUrl: &lt;% destinationEndpoint.target %&gt;\n    host: &lt;% host %&gt;\n    description: Cause baby, you're a firework. Come on, show 'em what you're worth\n    endpointName: &lt;% destinationEndpoint.friendlyName %&gt;\n    namespace: krateo-system\n    fromRepo:\n      schema: https\n      organizationName: krateoplatformops\n      repositoryName: krateo-template-fireworksapp\n    toRepo:\n      schema: https\n      organizationName: krateoplatformops\n      repositoryName: &lt;% owner %&gt;-fire-&lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;\n      apiUrl: https://api.github.com\n</code></pre>"},{"location":"app/app-deployments/#structure","title":"Structure","text":"<ul> <li><code>apiVersion</code>: deployment.krateo.io/v1alpha1</li> <li><code>kind</code>: depends by the composition</li> </ul>"},{"location":"app/app-deployments/#metadata","title":"Metadata","text":"<ul> <li><code>name</code>: name of the deployment</li> </ul>"},{"location":"app/app-deployments/#spec","title":"Spec","text":"<ul> <li><code>owner</code>: owner of the template</li> <li><code>title</code>: title of the template</li> <li><code>description</code>: description of the template</li> <li><code>icon</code>: fontawesome icon name. List of available icons is here fontawesome.com</li> <li><code>tags</code>: array of tags to identify your template</li> <li><code>links</code>: array of links (overview tab)</li> <li>plugins: list of plugins (tabs)</li> <li><code>values</code>: list of values to render the template</li> </ul>"},{"location":"app/app-deployments/#values_1","title":"Values","text":"<p>This is a object that contains the values to render the template.</p> <p>You can specify properties with default value or getting the value from the form.</p> <p>Here an example:</p> <pre><code>values:\n  organizationName: krateoplatformops\n  repositoryName: &lt;% repositoryName %&gt;\n</code></pre> <p><code>organizationName</code> has a default value, <code>repositoryName</code> is a value from the form.</p>"},{"location":"app/app-deployments/#endpoints","title":"Endpoints","text":"<p>When you use a field as <code>endpoint</code> you can use the value like an object. Endpoint object has this structure (for example):</p> <pre><code>{\n  \"friendlyName\": \"krateo\",\n  \"target\": \"https://krateo.io\",\n  \"token\": \"token\"\n}\n</code></pre> <p>Use the target value like this:</p> <pre><code>endpoint.target\n</code></pre>"},{"location":"app/app-deployments/#functions","title":"Functions","text":"<p>The deployment service supports some functions to manipulate the values. Available functions are:</p> <ul> <li><code>lower</code>: convert the value to lowercase</li> <li><code>upper</code>: convert the value to uppercase</li> <li><code>nospaces</code>: remove all spaces from the value</li> <li><code>spacedash</code>: replace all spaces with dash</li> <li><code>norm</code>: normalize the value (convert all spaces to dash and convert to lowercase)</li> </ul> <p>The value inside the function must be enclosed by <code>{{</code> and <code>}}</code>.</p>"},{"location":"app/app-deployments/#example_1","title":"Example","text":"<pre><code>&lt;%#norm%&gt;{{name}}&lt;%/norm%&gt;\n</code></pre>"},{"location":"app/app-overview/","title":"App","text":"<p>App is the frontend of the application. It is a single page application that uses React and Redux.</p>"},{"location":"app/app-overview/#structure","title":"Structure","text":"<ol> <li>Hamburger menu: you can collapse or expand the menu.</li> <li>Logo: if you go hover with the mouse, you can see the version of the application.</li> <li>search bar: search for resources in all the application.</li> <li>notifications bell: if you click on it you can show/hide the notification bar.</li> <li>navigation menu: you can navigate through the application.</li> <li>theme icon: you can change the theme of the application (dark or light).</li> </ol>"},{"location":"app/app-overview/#navigation-menu","title":"Navigation menu","text":"<ul> <li>Dashboard: it shows the main information of the application. In the top you have a summary of number of templates, deployments, users and endpoints. In the bottom you have a wizard to create a new deployment.</li> <li>Deployments: it shows the list of deployments. You can create a new deployment, view or delete an existing one.</li> <li>Templates: it shows the list of templates. You can view and use or delete an existing one.</li> <li>Packages: it shows the list of packages. You can add, view, update or delete an existing one.</li> <li>Register: here you can add a template.</li> <li>Settings: in this section you can view your login information, endpoints, secrets, components and you can logout from krateo.</li> </ul>"},{"location":"app/app-packages/","title":"Packages","text":"<p>Krateo works with packages (providers). In this section you can see all the packages that are available in the system and the status. If a package is outdated, you can update it by clicking on the button on the bottom right.</p> <p>In the above example you can see that \"provider-helm\" is not ready yet.</p>"},{"location":"app/app-packages/#add-package","title":"Add package","text":"<p>Clicking on the plus button on the top right, you can add a new package.</p> <p>You have a list of available packages, certified by krateo, that you can add to the system.</p> <p>If you want to add custom package, you can click again to the plus button on the top right and paste yaml of your package.</p> <p>This is an example of a custom package (in this case a provider for vsphere):</p> <pre><code>apiVersion: meta.pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  name: provider-vsphere\n  annotations:\n    meta.crossplane.io/maintainer: Krateo PlatformOps Maintainers &lt;info@krateo.io&gt;\n    meta.crossplane.io/source: github.com/krateoplatformops/provider-vsphere\n    meta.crossplane.io/license: Apache-2.0\n    meta.crossplane.io/description: |\n      A Crossplane Provider for VSphere.\nspec:\n  controller:\n    image: ghcr.io/krateoplatformops/provider-vsphere-controller:v0.5.0\n</code></pre>"},{"location":"app/app-register/","title":"Register","text":"<p>Here you can import templates to use in Krateo.</p> <p>To register a template you must have and endpoint of type git.</p> <p>The field full url is the complete url where template is located. For example, something like this</p> <pre><code>https://github.com/krateoplatformops/krateo-template-fireworksapp/blob/main/template.yaml\n</code></pre>"},{"location":"app/app-settings/","title":"Settings","text":"<p>The settings page allows you to get information about your</p> <ul> <li>Settings</li> <li>Profile</li> <li>Endpoints</li> <li>Secrets</li> <li>Components</li> <li>Authentication</li> </ul>"},{"location":"app/app-settings/#profile","title":"Profile","text":"<p>The profile section shows you your account information and the logout button. Your profile is composed by</p> <ul> <li>id</li> <li>display name</li> <li>username</li> <li>email</li> </ul> <p>If you log in with guest method you will have the guest@krateo.io email.</p>"},{"location":"app/app-settings/#endpoints","title":"Endpoints","text":"<p>Endpoints are used to connect to your data sources. You can create, edit and delete endpoints. Currently we support the following data sources</p> <ul> <li>argocd</li> <li>bitbucket</li> <li>github</li> <li>jenkins</li> <li>keptn</li> <li>sonarcloud</li> <li>typeform</li> </ul> <p>Every endpoint requires</p> <ul> <li>icon</li> <li>endpoint name (display name)</li> <li>target url</li> <li>endpoint type</li> </ul> <p>The <code>endpoint type</code> is used to determine which data source you want to connect to, and every endpoint requires different settings, for example, github requires only a token, while jenkins requires a username and a token.</p>"},{"location":"app/app-settings/#secrets","title":"Secrets","text":"<p>Secrets are used to store sensitive information like tokens, passwords, etc. You can create, edit and delete secrets. Secret aren't used directly by the app or services, but they are used by the compositions.</p> <p>Currently we support the following secret types</p> <ul> <li>aws</li> <li>[custom]</li> </ul> <p>Every secret requires</p> <ul> <li>icon</li> <li>secret name (display name)</li> <li>secret type</li> </ul> <p>The AWS type requires credentials, instead the custom type allows to you to create everything you need using key/value method.</p>"},{"location":"app/app-settings/#components","title":"Components","text":"<p>In this section the app will display all the services installed in your cluster. Every service is composed by</p> <ul> <li>version</li> <li>name</li> <li>status code (200 ok, 500 error)</li> </ul>"},{"location":"app/app-settings/#authentication","title":"Authentication","text":"<p>In this section you can enable/disable the authentication method you want to use. By default krateo is installed with guest strategy, but you can enable the following methods:</p> <ul> <li>basic</li> <li>github</li> <li>guest</li> <li>ldap</li> <li>microsoft</li> </ul> <p>Every strategy requires</p> <ul> <li>icon</li> <li>color</li> <li>strategy nane (display name)</li> <li>strategy type</li> </ul> <p>For example, here you can view how many settings the ldap strategy requires.</p> <p></p>"},{"location":"app/app-templates/","title":"Templates","text":"<p>Templates are the way to create deployments.</p> <p>Every template card has this information:</p> <ul> <li>icon</li> <li>name</li> <li>description</li> <li>tags</li> <li>link to template git repository (git icon bottom left)</li> <li>refresh button (bottom right)</li> <li>delete button (bottom right)</li> </ul> <p>The <code>refresh button</code> is used to update the template from the git repository.</p>"},{"location":"app/app-templates/#use-a-template","title":"Use a template","text":"<p>To use a template, click on the template card.</p> <p>A form will appear with the template parameters, on the left you can see the template steps and relative status.</p> <p>On the right you can see the form of the current step and the summary of this deployment.</p> <p>Until the deployment is not completed, you can't use the <code>Deploy</code> button.</p>"},{"location":"app/app-templates/#templateyaml","title":"Template.yaml","text":""},{"location":"app/app-templates/#structure","title":"Structure","text":"<ul> <li><code>apiVersion</code>: krateo.io/v1alpha1</li> <li><code>kind</code>: Template</li> </ul>"},{"location":"app/app-templates/#metadata","title":"Metadata","text":"<ul> <li><code>name</code>: name of the template</li> </ul>"},{"location":"app/app-templates/#spec","title":"Spec","text":"<ul> <li><code>owner</code>: owner of the template</li> <li><code>title</code>: title of the template</li> <li><code>description</code>: description of the template</li> <li><code>icon</code>: fontawesome icon name. List of available icons is here fontawesome.com</li> <li><code>tags</code>: array of tags to identify your template</li> <li><code>widgets</code>: array of widgets (steps)</li> </ul>"},{"location":"app/app-templates/#widget","title":"Widget","text":"<ul> <li><code>title</code>: title of the step</li> <li><code>description</code>: description of the step</li> <li><code>properties</code>: array of fields</li> </ul>"},{"location":"app/app-templates/#property","title":"Property","text":"<ul> <li><code>title</code>: title of the field (required)</li> <li><code>description</code>: description of the field</li> <li><code>key</code>: is the id of the field, it will be used in the deployment.yaml (required)</li> <li><code>required</code>: true/false</li> <li><code>default</code>: default value of the field</li> <li><code>type</code>: type of the field (default is text)</li> <li><code>options</code>: array of options (only for select/radio type)</li> <li><code>box</code>: display an info box on the right of the form</li> <li><code>style</code>: default style is 'default', available styles are</li> <li>info (blue)</li> <li>warning (orange)</li> <li>success (green)</li> <li>error (red)</li> </ul>"},{"location":"app/app-templates/#types","title":"Types","text":"<ul> <li><code>text</code>: text field (default)</li> <li><code>textarea</code>: textarea field</li> <li><code>url</code>: url field</li> <li><code>password</code>: password field (hidden value in summary)</li> <li><code>endpoint</code>: endpoint field</li> <li><code>radio</code>: radio field</li> <li><code>select</code>: select field</li> <li><code>multiple</code>: multiple field</li> <li><code>box</code>: info box</li> </ul>"},{"location":"app/app-templates/#options","title":"Options","text":"<ul> <li><code>title</code>: title of the option</li> <li><code>value</code>: value of the option (string)</li> </ul>"},{"location":"app/app-templates/#example","title":"Example","text":"<p>Here you can find a template example:</p> <pre><code>apiVersion: krateo.io/v1alpha1\nkind: Template\nmetadata:\n  name: krateo-fireworks\nspec:\n  owner: mauro.sala@kiratech.it\n  title: Krateo Fireworks\n  description: Krateo Fireworks Template\n  icon: fa-solid fa-fire\n  tags:\n    - fireworks\n    - template\n    - krateo\n    - katy perry\n  widgets:\n    - title: Name and description\n      description: Name your app\n      properties:\n        - title: Name\n          key: name\n          description: Unique name of the component\n          required: true\n          default: firefire\n    - title: Kubernetes\n      properties:\n        - title: Replicas\n          key: replicas\n          description: Number of replicas\n          type: radio\n          required: true\n          default: '1'\n          options:\n            - title: '1'\n              value: '1'\n            - title: '2'\n              value: '2'\n            - title: '3'\n              value: '3'\n    - title: Expose application\n      description: Expose your application\n      properties:\n        - title: Host\n          key: host\n          description: Hostname of the application\n          required: true\n          default: fireworks.krateo.site\n    - title: Git repository destination\n      properties:\n        - title: Endpoint\n          key: destinationEndpoint\n          description: github.com / gitlab.com / bitbucket.org\n          required: true\n          type: endpoint\n</code></pre> <p>The above file is hosted in the krateo-template-fireworksapp GitHub repository.</p> <pre><code>https://github.com/krateoplatformops/krateo-template-fireworksapp/blob/main/template.yaml\n</code></pre>"},{"location":"app/app-templates/#template-repository","title":"Template repository","text":"<p>The template repository is a git repository that contains the template.yaml file and the others file that must be cloned in the target repository.</p>"},{"location":"app/app-templates/#structure_1","title":"Structure","text":"<ul> <li><code>template.yaml</code> (file): template file</li> <li><code>deployment.yaml</code> (file): deployment file</li> <li><code>.krateoignore</code> (file): list of file/folders to ignore placeholder substitution in the target repository</li> <li><code>skeleton</code> (folder): this folder will be cloned in the target repository</li> <li><code>package.yaml</code> (file): composition package file</li> <li><code>crossplane.yaml</code> (file): crossplane file</li> </ul>"},{"location":"app/app-templates/#krateoignore","title":".krateoignore","text":"<p>The <code>.krateoignore</code> file is a list of file/folders to ignore placeholder substitution in the target repository. It works like the <code>.gitignore</code> file.</p>"},{"location":"app/app-templates/#skeleton-folder","title":"Skeleton folder","text":"<p>This folder contains the files that will be cloned in the target repository. in every file you can use the placeholder that will be replaced with the values of the form.</p> <p>Let's show this example:</p> <pre><code># {{=&lt;% %&gt;=}}\n---\nnamespace: &lt;% repositoryName %&gt;-ns\nimage: ghcr.io/&lt;% organizationName %&gt;/&lt;% repositoryName %&gt;:latest\nreplicas: &lt;% replicas %&gt;\nname: &lt;% repositoryName %&gt;\nhost: &lt;% host %&gt;\n</code></pre> <p>This example is a <code>values.yaml</code> file of a helm chart.</p> <p>In Krateo, we use mustache syntax to define the placeholder, in the first line we define the syntax, in this case we use <code>&lt;% %&gt;</code> instead of <code>{{ }}</code>.</p>"},{"location":"app/login/","title":"Login","text":"<p>After the installation, you can login to the application using the <code>guest</code> account.</p> <p>By clicking on the <code>guest</code> button you will be logged in.</p> <ul> <li>id: guest</li> <li>display name: guest</li> <li>username: guest</li> <li>email: guest@krateo.io</li> </ul> <p></p>"},{"location":"app/login/#basic-auth","title":"Basic auth","text":"<p>After the login you can add various authentication methods, this is the form when you add basic auth (username and password).</p> <p></p>"},{"location":"cli/cli-init-command/","title":"Using the Krateo CLI","text":""},{"location":"cli/cli-init-command/#command-krateo-init","title":"Command: <code>krateo init</code>","text":""},{"location":"cli/cli-init-workflow/","title":"Krateo CLI 'init' command workflow","text":"<pre><code>sequenceDiagram\n    actor U as Platform Engineer\n    participant A as Krateo CLI\n    participant B as github.com/krateoplatformops\n    participant C as Kubernetes\n\n    autonumber\n\n    U -&gt;&gt;A: krateo init\n\n    A-&gt;&gt;+C: Install Crossplane\n    C--&gt;&gt;-A: Wait until POD is ready\n\n    A-&gt;&gt;+B: Fetch base providers catalog\n    B--&gt;&gt;-A: #160;\n    loop Each provider in catalog\n        A-&gt;+C: Install the provider\n        C--&gt;&gt;-A: Wait until is ready\n    end\n\n    A-&gt;+C: Install the core module definition\n    C--&gt;&gt;-A: Wait until is ready \n\n    A-&gt;&gt;+U: prompt for domain where&lt;br&gt;deploy Krateo PlatformOps\n    U--&gt;&gt;-A: enter the domain name\n\n    A-&gt;&gt;+C: apply the core module values&lt;br&gt;and install Krateo PlatformOps\n    C--&gt;&gt;-A: Wait until ready\n\n    A-&gt;&gt;U: print the Krateo PlatoformOps&lt;br&gt; dashboard access URL     </code></pre>"},{"location":"cli/cli-install-linux/","title":"Install krateo on Linux","text":"<p>The following methods exist for installing krateo on Linux:</p> <ul> <li>Install krateo binary with curl on Linux</li> <li>Install using other package management</li> </ul>"},{"location":"cli/cli-install-linux/#install-krateo-binary-with-curl-on-linux","title":"Install krateo binary with curl on Linux","text":"<p>Step 1. Download the latest release with the command:</p> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v1.3.5/krateo_1.3.5_linux_amd64.tar.gz\n</code></pre> <p>Note</p> <ul> <li>to download a specific version, replace the {VERSION} with your desired release </li> <li>to download a binary compiled for a arm architecture, replace {ARCH} with <code>arm64</code></li> </ul> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v{VERSION}/krateo_{VERSION}_linux_{ARCH}.tar.gz\n</code></pre> <p>Step 2. Extract the tar.gz archive</p> <pre><code>tar -xf krateo_1.3.5_linux_amd64.tar.gz\n</code></pre> <p>Step 3. Install krateo to the <code>~/.local/bin</code> directory:</p> <pre><code>chmod +x krateo\nmkdir -p ~/.local/bin\nmv ./krateo ~/.local/bin/krateo\n# and then append (or prepend) ~/.local/bin to $PATH\n</code></pre> <p>Step 4. Test to ensure the version you installed is up-to-date</p> <pre><code>krateo version\n</code></pre>"},{"location":"cli/cli-install-linux/#install-using-other-package-management","title":"Install using other package management","text":"Homebrew <p>If you are on Linux and using Homebrew package manager, krateo is available for installation.</p> <pre><code>brew install krateo\nkrateo version\n</code></pre>"},{"location":"cli/cli-install-macos/","title":"Install krateo on macOS","text":"<p>The following methods exist for installing krateo on macOS:</p> <ul> <li>Install krateo binary with curl on macOS</li> <li>Install with Homebrew on macOS</li> </ul>"},{"location":"cli/cli-install-macos/#install-krateo-binary-with-curl-on-macos","title":"Install krateo binary with curl on macOS","text":"<p>Step 1. Download the latest release with the command:</p> IntelApple Silicon <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v1.3.5/krateo_1.3.5_darwin_amd64.tar.gz\n</code></pre> <p>Note</p> <ul> <li>to download a specific version, replace the {VERSION} with your desired release </li> </ul> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v{VERSION}/krateo_{VERSION}_darwin_amd64.tar.gz\n</code></pre> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v1.3.5/krateo_1.3.5_darwin_arm64.tar.gz\n</code></pre> <p>Note</p> <ul> <li>to download a specific version, replace the {VERSION} with your desired release </li> </ul> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v{VERSION}/krateo_{VERSION}_darwin_arm64.tar.gz\n</code></pre> <p>Step 2. Extract the tar.gz archive</p> <pre><code>tar -xf krateo_1.3.5_linux_amd64.tar.gz\n</code></pre> <p>Step 3. Install krateo to the <code>~/.local/bin</code> directory:</p> <pre><code>chmod +x krateo\nmkdir -p ~/.local/bin\nmv ./krateo ~/.local/bin/krateo\n# and then append (or prepend) ~/.local/bin to $PATH\n</code></pre> <p>Step 4. Test to ensure the version you installed is up-to-date</p> <pre><code>krateo version\n</code></pre>"},{"location":"cli/cli-install-macos/#install-with-homebrew-on-macos","title":"Install with Homebrew on macOS","text":"<p>If you are on macOS and using Homebrew package manager, krateo is available for installation.</p> <pre><code>brew install krateo\nkrateo version\n</code></pre>"},{"location":"cli/cli-install-windows/","title":"Install krateo on Windows","text":"<p>The following methods exist for installing krateo on Windows:</p> <ul> <li>Install krateo binary with curl on Windows</li> </ul>"},{"location":"cli/cli-install-windows/#install-krateo-binary-with-curl-on-windows","title":"Install krateo binary with curl on Windows","text":"<p>Step 1. Download the latest release.</p> <p>Or if you have curl installed, use this command:</p> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v1.3.5/krateo_1.3.5_windows_amd64.tar.gz\n</code></pre> <p>Note</p> <ul> <li>to download a specific version, replace the {VERSION} with your desired release </li> </ul> <pre><code>curl -LO https://github.com/krateoplatformops/krateo/releases/download/v{VERSION}/krateo_{VERSION}_windows_amd64.tar.gz\n</code></pre> <p>Step 2. Append or prepend the krateo binary folder to your <code>PATH</code> environment variable.</p> <p>Step 3. Test to ensure the version you installed is up-to-date</p> <pre><code>krateo.exe version\n</code></pre>"},{"location":"cli/cli-install/","title":"Installing the Krateo CLI","text":"<p>The Krateo CLI is installable on a variety of Linux platforms, macOS and Windows. </p> <p>Find your preferred operating system below.</p> <ul> <li>Install krateo on Linux</li> <li>Install krateo on macOS</li> <li>Install krateo on Windows</li> </ul>"},{"location":"cli/cli-overview/","title":"Krateo CLI","text":"<p>The Krateo PlatformOps CLI is a tool that you can use to install Krateo PlatformOps on your cluster.</p>"},{"location":"cli/cli-using/","title":"Using the Krateo CLI","text":"<p>For configuration, krateo looks for a file named config in the <code>$HOME/.kube</code> directory. </p> <p>You can specify other kubeconfig files by setting the <code>KUBECONFIG</code> environment variable or by setting the <code>--kubeconfig</code> flag.</p> <p>This overview covers krateo syntax, describes the command operations, and provides common examples.</p>"},{"location":"cli/cli-using/#syntax","title":"Syntax","text":"<p>Use the following syntax to run krateo commands from your terminal window:</p> <pre><code>krateo [command] [flags]\n</code></pre> <p>where command and flags are:</p> <ul> <li>command: Specifies the operation that you want to perform, for example <code>init</code>, <code>uninstall</code></li> <li>flags: Specifies optional flags. For example, you can use the <code>-v</code> or <code>--verbose</code> flags to output verbose info while executing the command</li> </ul> <p>If you need help, run <code>krateo help</code> from the terminal window.</p>"},{"location":"cli/cli-using/#operations","title":"Operations","text":"<p>The following table includes short descriptions and the general syntax for all of the krateo operations:</p> Operation Syntax Description init krateo init Initialize your cluster with the Krateo PlatformOps uninstall krateo uninstall Uninstall Krateo PlatformOps from your cluster version krateo version Print the Krateo CLI tool version and build info help krateo [command] help Print more information about a command"},{"location":"cli/cli-using/#krateo-init-flags","title":"<code>krateo init [flags]</code>","text":"<p>Scope: Initialize your cluster with the Krateo PlatformOps</p> Flag Default value Description --context  specify the kubeconfig context to use --help print the help for this krateo init command --http-proxy  HTTP_PROXY env var use the specified HTTP proxy --https-proxy  HTTPS_PROXY env var use the specified HTTPS proxy --kubeconfig  $HOME/.kube/config absolute path to the kubeconfig file --namespace  krateo-system namespace where to install Krateo PlatformOps --no-proxy  NO_PROXY env var comma-separated list of hosts and domainswhich do not use the proxy --openshift specify this if installing Krateo PlatformOps on OpenShift --verbose print verbose information"},{"location":"cli/cli-using/#krateo-uninstall-flags","title":"<code>krateo uninstall [flags]</code>","text":"<p>Scope: Uninstall Krateo Platform Ops from your cluster</p> Flag Default value Description --context  specify the kubeconfig context to use --dry-run preview the object that would be deleted,without really deleting it --help print the help for this krateo init command --kubeconfig  $HOME/.kube/config absolute path to the kubeconfig file --namespace  krateo-system namespace where Krateo PlatformOps is installed --verbose print verbose information"},{"location":"providers/provider-argocd-endpoint/","title":"Provider ArgoCD Endpoint","text":""},{"location":"providers/provider-argocd-endpoint/#overview","title":"Overview","text":"<p>This is a Kubernetes Operator (Crossplane provider) that creates API tokens for specific ArgoCD users.</p> <p>The provider that is built from the source code in this repository adds the following new functionality:</p> <ul> <li>a Custom Resource Definition (CRD) that model ArgoCD auth tokens for specific users</li> </ul>"},{"location":"providers/provider-argocd-endpoint/#getting-started","title":"Getting Started","text":"<p>With Crossplane and ArgoCD installed in your cluster:</p> <pre><code>$ helm repo add crossplane-stable https://charts.crossplane.io/stable\n$ helm repo update\n$ helm install crossplane --namespace crossplane-system crossplane-stable/crossplane\n</code></pre> <pre><code>$ kubectl create namespace argo-system\n$ kubectl apply -n argo-system -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\n</code></pre>"},{"location":"providers/provider-argocd-endpoint/#how-to-install-this-provider","title":"How to install this provider","text":"<pre><code>$ kubectl apply -f ./examples/provider.yaml\n</code></pre> <p>Replace <code>VERSION</code> tag with the desired release.</p>"},{"location":"providers/provider-argocd-endpoint/#configure-this-operator-with-serverurl-pointing-to-an-argocd-instance","title":"Configure this operator with <code>serverUrl</code> pointing to an ArgoCD instance","text":"<pre><code>$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: argocd.krateo.io/v1alpha1\nkind: ProviderConfig\nmetadata:\n  name: provider-argocd-endpoint-config\nspec:\n  serverUrl: https://argocd-server.argo-system.svc:443\n  credentials:\n    source: Secret\n    secretRef:\n      namespace: argo-system\n      name: argocd-initial-admin-secret\n      key: password\nEOF\n</code></pre>"},{"location":"providers/provider-argocd-endpoint/#create-a-new-argocd-account","title":"Create a new ArgoCD account","text":"<p>Following the steps in the official ArgoCD documentation you can create a new user defining it in the <code>argo-cm</code> ConfigMap:</p> <pre><code>$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argo-system\n  labels:\n    app.kubernetes.io/name: argocd-cm\n    app.kubernetes.io/part-of: argocd\ndata:\n  accounts.krateo-dashboard: apiKey, login\nEOF\n</code></pre> <p>Each user might have two capabilities:</p> <ul> <li>apiKey: allows generating authentication tokens for API access</li> <li>login: allows to login using UI</li> </ul>"},{"location":"providers/provider-argocd-endpoint/#create-an-api-token-without-expiration-that-can-be-used-by-the-defined-user","title":"Create an API token without expiration that can be used by the defined user","text":"<pre><code>$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: argocd.krateo.io/v1alpha1\nkind: Endpoint\nmetadata:\n  name: krateo-dashboard-argocd-endpoint\nspec:\n  forProvider:\n    account: krateo-dashboard\n    writeSecretToRef:\n      name: krateo-dashboard-argocd-endpoint\n      namespace: krateo-system\n  providerConfigRef:\n    name: provider-argocd-endpoint-config\nEOF\n</code></pre>"},{"location":"providers/provider-argocd-endpoint/#after-a-while-check-if-the-api-token-is-created","title":"After a while check if the API token is created","text":"<pre><code>$ kubectl get secrets/krateo-dashboard-argocd-endpoint -n krateo-system \\\n   --template='{{.data.bearer | base64decode}}'\n\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkOWZkNDJiYi05ZGU4LTRmMGUtYTA...\n</code></pre>"},{"location":"providers/provider-bitbucket/","title":"Provider Bitbucket","text":""},{"location":"providers/provider-bitbucket/#overview","title":"Overview","text":"<p>This is a Kubernetes Operator (Crossplane provider) that:</p> <ul> <li>create and delete Bitbucket repositories</li> <li>manage Bitbucket user permissions</li> </ul>"},{"location":"providers/provider-bitbucket/#getting-started","title":"Getting Started","text":"<p>With Crossplane installed in your cluster:</p> <pre><code>$ helm repo add crossplane-stable https://charts.crossplane.io/stable\n$ helm repo update\n$ helm install crossplane --namespace crossplane-system crossplane-stable/crossplane\n</code></pre>"},{"location":"providers/provider-bitbucket/#install-this-provider","title":"Install this provider","text":"<p>Install the below manifest:</p> <pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  name: crossplane-provider-bitbucket\nspec:\n  package: 'ghcr.io/krateoplatformops/provider-bitbucket:VERSION'\n  packagePullPolicy: IfNotPresent\nEOF\n</code></pre> <p>replace <code>VERSION</code> with latest provider tag</p>"},{"location":"providers/provider-bitbucket/#configure-the-provider","title":"Configure the provider","text":"<pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: bitbucket.krateo.io/v1alpha1\nkind: ProviderConfig\nmetadata:\n  name: bitbucket-provider-config\nspec:\n  apiUrl: http://10.99.99.37:7990\n  verbose: true\n  insecure: true\n  credentials:\n    source: Secret\n    secretRef:\n      namespace: default\n      name: bitbucket-secret\n      key: token\nEOF\n</code></pre>"},{"location":"providers/provider-bitbucket/#configuring-the-repo-custom-resource","title":"Configuring the <code>Repo</code> custom resource","text":"<pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: bitbucket.krateo.io/v1alpha1\nkind: Repo\nmetadata:\n  name: bitbucket-provider-example\nspec:\n  forProvider:\n    project: JXP\n    name: demo-repo\n    private: true\n  providerConfigRef:\n    name: bitbucket-provider-config\nEOF\n</code></pre>"},{"location":"providers/provider-bitbucket/#configuring-the-repopermissionuser-custom-resource","title":"Configuring the <code>RepoPermissionUser</code> custom resource","text":"<pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: bitbucket.krateo.io/v1alpha1\nkind: Repo\nmetadata:\n  name: bitbucket-provider-example\nspec:\n  forProvider:\n    project: JXP\n    name: demo-repo\n    private: true\n  providerConfigRef:\n    name: bitbucket-provider-config\nEOF\n</code></pre>"},{"location":"providers/provider-git/","title":"Provider Git","text":""},{"location":"providers/provider-git/#overview","title":"Overview","text":"<p>This is a Kubernetes Operator (Crossplane provider) that clones one remote git repository over another one.</p> <p>The provider that is built from the source code in this repository adds the following new functionality:</p> <ul> <li>a Custom Resource Definition (CRD) that model git repositories remote clones</li> </ul>"},{"location":"providers/provider-git/#getting-started","title":"Getting Started","text":"<p>With Crossplane installed in your cluster:</p> <pre><code>$ helm repo add crossplane-stable https://charts.crossplane.io/stable\n$ helm repo update\n$ helm install crossplane --namespace crossplane-system crossplane-stable/crossplane\n</code></pre>"},{"location":"providers/provider-git/#install-this-provider","title":"Install this provider","text":"<p>Before installing the below manifest:</p> <ul> <li>replace <code>VERSION</code> with latest or your preferred provider version</li> </ul> <pre><code>$ kubectl apply -f ./examples/provider.yaml\n</code></pre>"},{"location":"providers/provider-git/#configure-the-repo-crd-instance","title":"Configure the <code>Repo</code> CRD instance","text":"<p>You can found example manifest files here:</p> <ul> <li>provider config config.yaml</li> <li>crd instance example.yaml</li> </ul>"},{"location":"providers/provider-github/","title":"Provider GitHub","text":""},{"location":"providers/provider-github/#overview","title":"Overview","text":"<p>This is a Kubernetes Operator (Crossplane provider) that creates a GitHub repository.</p>"},{"location":"providers/provider-github/#getting-started","title":"Getting Started","text":"<p>With Crossplane installed in your cluster:</p> <pre><code>$ helm repo add crossplane-stable https://charts.crossplane.io/stable\n$ helm repo update\n$ helm install crossplane --namespace crossplane-system crossplane-stable/crossplane\n</code></pre>"},{"location":"providers/provider-github/#install-this-provider","title":"Install this provider","text":"<p>Install the below manifest:</p> <pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  namespace: krateo-system\n  name: provider-github\nspec:\n  package: 'ghcr.io/krateoplatformops/provider-github:VERSION'\n  packagePullPolicy: IfNotPresent\nEOF\n</code></pre> <p>replace <code>VERSION</code> with latest provider tag</p>"},{"location":"providers/provider-github/#configure-the-provider","title":"Configure the provider","text":"<pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: github.krateo.io/v1alpha1\nkind: ProviderConfig\nmetadata:\n  name: provider-github-demo-config\nspec:\n  # URL to Github API\n  apiUrl: https://github.yourdomain.it/api/v3\n  # Set verbose true to dump all client requests\n  verbose: true\n  # The secret with your Github PAT\n  credentials:\n    source: Secret\n    secretRef:\n      namespace: default\n      name: github-secret\n      key: token\nEOF\n</code></pre>"},{"location":"providers/provider-github/#configure-the-repo-crd-instance","title":"Configure the <code>Repo</code> CRD instance","text":"<pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: github.krateo.io/v1alpha1\nkind: Repo\nmetadata:\n  name: provider-github-demo\nspec:\n  forProvider:\n    # Github Owner\n    org: krateoplatformops\n    # Repository name\n    name: demo-repo\n  providerConfigRef:\n    name: provider-github-demo-config\nEOF\n</code></pre>"},{"location":"services/argocd-service/","title":"ArgoCD Service","text":"<p>This service is used to get resource tree or resource details from ArgoCD.</p> <p>If you need to use this service you need to create an ArgoCD endpoint.</p>"},{"location":"services/argocd-service/#routes","title":"Routes","text":""},{"location":"services/argocd-service/#get-endpointname","title":"GET <code>/:endpoint/:name</code>","text":"<ul> <li><code>endpoint</code>: the name of the endpoint</li> <li><code>name</code>: is the app name in ArgoCD</li> </ul>"},{"location":"services/argocd-service/#example","title":"Example","text":"<p>This path is using the <code>argocd</code> endpoint to get the <code>firefire-fireworksapp</code> app.</p> <pre><code>argocd/firefire-fireworksapp\n</code></pre>"},{"location":"services/argocd-service/#response","title":"Response","text":"<pre><code>{\n  \"edges\": [],\n  \"nodes\": []\n}\n</code></pre> <ul> <li><code>edges</code>: the list of connections between nodes</li> <li><code>nodes</code>: the list of nodes</li> </ul>"},{"location":"services/argocd-service/#get-endpointnameparams","title":"GET <code>/:endpoint/:name?&lt;params&gt;</code>","text":"<ul> <li><code>endpoint</code>: the name of the endpoint</li> <li><code>name</code>: is the app name in ArgoCD</li> <li><code>params</code>: the info about the resource you want to get details</li> </ul>"},{"location":"services/argocd-service/#example_1","title":"Example","text":"<p>This path is using the <code>argocd</code> endpoint to get the <code>firefire-fireworksapp</code> app.</p> <pre><code>argocd/firefire-fireworksapp?name=guest-fire-firefire-service&amp;resourceName=guest-fire-firefire-service&amp;namespace=guest-fire-firefire-ns&amp;version=v1&amp;kind=Service\n</code></pre>"},{"location":"services/argocd-service/#response_1","title":"Response","text":"<pre><code>{\n  \"manifest\": {}\n}\n</code></pre> <ul> <li><code>manifest</code>: the yaml manifest of the resource</li> </ul>"},{"location":"services/auth-service/","title":"Auth Service","text":"<p>This service is responsible for authentication of users and to manage authentication methods.</p>"},{"location":"services/auth-service/#routes","title":"Routes","text":""},{"location":"services/auth-service/#get-authguest","title":"GET <code>/auth/guest</code>","text":""},{"location":"services/auth-service/#get-authgithub","title":"GET <code>/auth/github</code>","text":""},{"location":"services/auth-service/#get-authmicrosoft","title":"GET <code>/auth/microsoft</code>","text":"<p>This routes is used to authenticate a user with these providers:</p> <ul> <li>guest</li> <li>github</li> <li>microsoft</li> </ul>"},{"location":"services/auth-service/#get-authgithubcallback","title":"GET <code>/auth/github/callback</code>","text":""},{"location":"services/auth-service/#get-authmicrosoftcallback","title":"GET <code>/auth/microsoft/callback</code>","text":"<p>It's the route that the provider will redirect the user after the authentication.</p>"},{"location":"services/auth-service/#get-authlogout","title":"GET <code>/auth/logout</code>","text":"<p>This route is used to logout the user.</p>"},{"location":"services/auth-service/#post-authldapnameauthname","title":"POST <code>/auth/ldap?name=&lt;authName&gt;</code>","text":""},{"location":"services/auth-service/#post-authbasicnameauthname","title":"POST <code>/auth/basic?name=&lt;authName&gt;</code>","text":"<p>These routes are used to authenticate a user with ldap or basic auth. In both cases the request body must contain the following fields:</p>"},{"location":"services/auth-service/#example","title":"Example","text":"<p>In this example we using the basic auth and the auth name is <code>authn-basic</code>.</p> <pre><code>auth/basic?name=authn-basic\n</code></pre> <pre><code>{\n  \"username\": \"username\",\n  \"password\": \"password\"\n}\n</code></pre>"},{"location":"services/auth-service/#response","title":"Response","text":"<pre><code>{\n  \"id\": \"krateo\",\n  \"displayName\": \"krateo\",\n  \"username\": \"krateo\",\n  \"provider\": \"basic\",\n  \"email\": \"krateo@krateo.io\"\n}\n</code></pre> <pre><code>krateoplatformops=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImtyYXRlbyIsImRpc3BsYXlOYW1lIjoia3JhdGVvIiwidXNlcm5hbWUiOiJrcmF0ZW8iLCJwcm92aWRlciI6ImJhc2ljIiwiZW1haWwiOiJrcmF0ZW9Aa3JhdGVvLmlvIiwiaWF0IjoxNjY4MDY3NDY1LCJleHAiOjQyNjAwNjc0NjUsImlzcyI6IjEzYjQ2NTkzZmU3MDRjNTc5NjZmZjQxZGNhOWRjNDhiIn0.Cp_vMDev5_S8hlD2UE2fBHl2jXLDUx-feRp5CZM_L-4; Max-Age=2592000; Domain=krateo.site; Path=/; Expires=Sat, 10 Dec 2022 08:04:25 GMT; HttpOnly; Secure; SameSite=Strict\n</code></pre>"},{"location":"services/auth-service/#get-strategy","title":"GET <code>/strategy</code>","text":"<p>This route returns alla the available authentication methods.</p>"},{"location":"services/auth-service/#reponse","title":"Reponse","text":"<pre><code>{\n  \"list\": [\n    {\n      \"metadata\": {\n        \"name\": \"authn-basic\",\n        \"uid\": \"19690619-db0c-43c6-a4ef-ec1ba7181891\"\n      },\n      \"spec\": {\n        \"color\": \"blue\",\n        \"icon\": \"fa-solid fa-key\",\n        \"name\": \"basic\",\n        \"strategy\": \"basic\",\n        \"type\": \"form\"\n      }\n    },\n    {\n      \"metadata\": {\n        \"name\": \"authn-guest\",\n        \"uid\": \"4071ed97-9d1d-4027-8d5f-4cca2c798625\"\n      },\n      \"spec\": {\n        \"color\": \"blue\",\n        \"icon\": \"fa-solid fa-lock\",\n        \"name\": \"guest\",\n        \"strategy\": \"guest\",\n        \"type\": \"redirect\"\n      }\n    }\n  ],\n  \"count\": 2\n}\n</code></pre>"},{"location":"services/auth-service/#get-strategyname","title":"GET <code>/strategy/:name</code>","text":"<p>This route returns the authentication method with the given name.</p>"},{"location":"services/auth-service/#example_1","title":"Example","text":"<pre><code>/strategy/auhtn-basic`\n</code></pre>"},{"location":"services/auth-service/#post-strategy","title":"POST <code>/strategy</code>","text":"<p>It is used to create a authentication strategy.</p>"},{"location":"services/auth-service/#delete-strategyname","title":"DELETE <code>/strategy/:name</code>","text":"<p>It is used to delete an authentication strategy.</p>"},{"location":"services/auth-service/#get-user","title":"GET <code>/user</code>","text":"<p>Parse cookie and return the json of the user.</p>"},{"location":"services/auth-service/#response_1","title":"Response","text":"<pre><code>{\n  \"id\": \"guest\",\n  \"username\": \"guest\",\n  \"provider\": \"guest\",\n  \"email\": \"guest@krateo.io\"\n}\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/capi-service/","title":"Capi Service","text":"<p>This is the cluster api service.</p>"},{"location":"services/capi-service/#routes","title":"Routes","text":""},{"location":"services/capi-service/#get-deploymentidkubeconfig","title":"GET <code>/:deploymentId/kubeconfig</code>","text":"<p>This route returns the kubeconfig for the given deployment.</p>"},{"location":"services/capi-service/#example","title":"Example","text":"<pre><code>/b367d339-d848-446f-aee4-963a6e3cc0c1/kubeconfig\n</code></pre>"},{"location":"services/capi-service/#get-deploymentidcluster","title":"GET <code>/:deploymentId/cluster</code>","text":"<p>This route returns the cluster object for the given deployment.</p>"},{"location":"services/capi-service/#example_1","title":"Example","text":"<pre><code>/b367d339-d848-446f-aee4-963a6e3cc0c1/kubeconfig\n</code></pre>"},{"location":"services/codequality-service/","title":"Code Quality Service","text":"<p>This service is used to check the code quality of a project.</p> <p>Currently we support this service:</p> <ul> <li>sonarcloud/sonarqube</li> </ul>"},{"location":"services/codequality-service/#routes","title":"Routes","text":""},{"location":"services/codequality-service/#get-endpointnamekey","title":"GET <code>/:endpointName/:key</code>","text":"<ul> <li><code>endpointName</code> - The name of the endpoint to use.</li> <li><code>key</code> - The key of the project to check. This is the project key in sonarcloud/sonarqube.</li> </ul>"},{"location":"services/codequality-service/#example","title":"Example","text":"<pre><code>/sonarcloud/maurosala_fat-squirrels\n</code></pre>"},{"location":"services/codequality-service/#response","title":"Response","text":"<pre><code>{\n  \"component\": {\n    \"organization\": \"maurosala\",\n    \"key\": \"maurosala_fat-squirrels\",\n    \"name\": \"fat-squirrels\",\n    \"qualifier\": \"TRK\",\n    \"analysisDate\": \"2022-04-15T16:23:33+0200\",\n    \"tags\": [],\n    \"visibility\": \"public\",\n    \"leakPeriodDate\": \"2021-10-28T11:52:16+0200\",\n    \"version\": \"not provided\"\n  },\n  \"metrics\": [\n    {\n      \"metric\": \"alert_status\",\n      \"label\": \"alert status\",\n      \"value\": \"OK\",\n      \"color\": \"Green\",\n      \"icon\": \"fa-solid fa-exclamation-triangle\",\n      \"category\": \"alerts\"\n    },\n    { ... }\n  ],\n  \"link\": \"https://sonarcloud.io/project/overview?id=maurosala_fat-squirrels\"\n}\n</code></pre>"},{"location":"services/component-service/","title":"Component Service","text":"<p>This service returns the status of Krateo components.</p> <p>It scans all the kubernetes services in the current namespace using this selectors:</p> <pre><code>app.kubernetes.io/component=service\napp.kubernetes.io/part-of=krateo\n</code></pre>"},{"location":"services/component-service/#routes","title":"Routes","text":""},{"location":"services/component-service/#get","title":"GET <code>/</code>","text":"<p>Returns the status of all components.</p>"},{"location":"services/component-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [{ \"name\": \"argocd-service\", \"status\": 200, \"statusText\": \"OK\" }],\n  \"count\": 1\n}\n</code></pre>"},{"location":"services/deployment-service/","title":"Deployment Service","text":"<p>This service is used to manage deployments.</p>"},{"location":"services/deployment-service/#routes","title":"Routes","text":""},{"location":"services/deployment-service/#get","title":"GET <code>/</code>","text":"<p>Get alle deployments.</p>"},{"location":"services/deployment-service/#response","title":"Response","text":"<pre><code>{\n   \"list\":[\n      {\n         \"apiVersion\":\"deployment.krateo.io/v1alpha1\",\n         \"kind\":\"FireworksApp\",\n         \"metadata\": {...},\n         \"spec\": {...}\n      }\n   ],\n   \"count\":1\n}\n</code></pre>"},{"location":"services/deployment-service/#get-uid","title":"GET <code>/:uid</code>","text":"<p>This controller returns a deployment by uid, but it scans all the deployments independently by kind, so this is slower than the subsequent route.</p>"},{"location":"services/deployment-service/#example","title":"Example","text":"<pre><code>b367d339-d848-446f-aee4-963a6e3cc0c1\n</code></pre>"},{"location":"services/deployment-service/#response_1","title":"Response","text":"<pre><code>{\n    \"apiVersion\":\"deployment.krateo.io/v1alpha1\",\n    \"kind\":\"FireworksApp\",\n    \"metadata\": {...},\n    \"spec\": {...}\n}\n</code></pre>"},{"location":"services/deployment-service/#get-kinduid","title":"GET <code>/:kind/:uid</code>","text":"<p>Get a deployment by kind and uid (faster than previous route).</p>"},{"location":"services/deployment-service/#example_1","title":"Example","text":"<pre><code>FireworksApp/b367d339-d848-446f-aee4-963a6e3cc0c1\n</code></pre>"},{"location":"services/deployment-service/#response_2","title":"Response","text":"<pre><code>{\n    \"apiVersion\":\"deployment.krateo.io/v1alpha1\",\n    \"kind\":\"FireworksApp\",\n    \"metadata\": {...},\n    \"spec\": {...}\n}\n</code></pre>"},{"location":"services/deployment-service/#post","title":"POST <code>/</code>","text":"<p>Create a deployment from a template form.</p>"},{"location":"services/deployment-service/#example_2","title":"Example","text":"<pre><code>{\n  \"metadata\": {\n    \"name\": \"firefire\",\n    \"replicas\": \"1\",\n    \"host\": \"fireworks.krateo.site\",\n    \"organizationName\": \"krateoplatformops\",\n    \"destinationEndpoint\": \"argocd\",\n    \"owner\": \"guest\"\n  },\n  \"templateId\": \"385e9004-1717-4065-989a-34fb122a6de1\"\n}\n</code></pre>"},{"location":"services/deployment-service/#response_3","title":"Response","text":"<pre><code>{\n    \"apiVersion\":\"deployment.krateo.io/v1alpha1\",\n    \"kind\":\"FireworksApp\",\n    \"metadata\": {...},\n    \"spec\": {...}\n}\n</code></pre>"},{"location":"services/deployment-service/#delete","title":"DELETE <code>/</code>","text":"<p>Delete a deployment.</p>"},{"location":"services/deployment-service/#example_3","title":"Example","text":"<pre><code>{\n  \"apiVersion\": \"deployment.krateo.io/v1alpha1\",\n  \"kind\": \"FireworksApp\",\n  \"name\": \"aaaa-fireworksapp\",\n  \"uid\": \"cc742bb0-19ca-469b-8c2d-187b0aaf019e\"\n}\n</code></pre>"},{"location":"services/deployment-service/#response_4","title":"Response","text":"<pre><code>{ \"message\": \"Deployment with name aaaa-fireworksapp deleted\" }\n</code></pre>"},{"location":"services/event-service/","title":"Git Service","text":"<p>This service is used to get files from a git repository.</p> <p>We can manage this types of git repository:</p> <ul> <li>github (public and private)</li> <li>bitbucket (on-premise)</li> </ul> <p>Independently of the git service, this service needs an endpoint to get the files.</p>"},{"location":"services/event-service/#routes","title":"Routes","text":""},{"location":"services/event-service/#get-deploymentid","title":"GET <code>/:deploymentId</code>","text":"<ul> <li><code>deploymentId</code>: is the id of the deployment</li> </ul>"},{"location":"services/event-service/#example","title":"Example","text":"<p>This path is getting info about the deployment with id <code>b367d339-d848-446f-aee4-963a6e3cc0c1</code>.</p> <pre><code>b367d339-d848-446f-aee4-963a6e3cc0c1\n</code></pre>"},{"location":"services/event-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"message\": \"cannot get object: applications.argoproj.io \\\"firefire-fireworksapp\\\" is forbidden: User \\\"system:serviceaccount:crossplane-system:provider-kubernetes-a1a49ab74384\\\" cannot get resource \\\"applications\\\" in API group \\\"argoproj.io\\\" in the namespace \\\"krateo-system\\\"\",\n      \"time\": 1668005542,\n      \"level\": \"warning\",\n      \"reason\": \"CannotObserveExternalResource\",\n      \"source\": \"firefire-fireworksapp-argocd-app-object\",\n      \"deploymentId\": \"b367d339-d848-446f-aee4-963a6e3cc0c1\"\n    }\n  ],\n  \"count\": 1\n}\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/event-service/#post","title":"POST <code>/</code>","text":"<p>Usually is the <code>event router</code> to post data here, the payload (with some edits) will be routed to the notification service.</p>"},{"location":"services/event-service/#example_1","title":"Example","text":"<p>This is a sample event:</p> <pre><code>{\n  \"type\": \"Warning\",\n  \"reason\": \"CannotCreateExternalResource\",\n  \"deploymentId\": \"\",\n  \"time\": 1660835529,\n  \"message\": \"cannot create EKS node group: ResourceInUseException: Cluster: test-1 is not in a valid state\",\n  \"source\": \"managed/nodegroup\",\n  \"involvedObject\": {\n    \"apiVersion\": \"eks.aws.crossplane.io/v1alpha1\",\n    \"kind\": \"NodeGroup\",\n    \"name\": \"test-1-ng\",\n    \"uid\": \"6365c158-8ee1-4d36-a33a-ba3cc0958ee0\"\n  },\n  \"metadata\": {\n    \"creationTimestamp\": \"2022-10-26T17:25:12+02:00\",\n    \"name\": \"test-1-ng.170c791ccd13d0cd\",\n    \"namespace\": \"default\",\n    \"uid\": \"6aa0a50b-1b5b-46e0-b5ec-a1118286f0c4\"\n  }\n}\n</code></pre>"},{"location":"services/event-service/#response_1","title":"Response","text":"<pre><code>{\n  \"message\": \"ok\"\n}\n</code></pre>"},{"location":"services/git-service/","title":"Git Service","text":"<p>This service is used to get files from a git repository.</p> <p>We can manage this types of git repository:</p> <ul> <li>github (public and private)</li> <li>bitbucket (on-premise)</li> <li>gitlab (public)</li> <li>azuredevops (public)</li> </ul> <p>Independently of the git service, this service needs an endpoint to get the files.</p>"},{"location":"services/git-service/#routes","title":"Routes","text":""},{"location":"services/git-service/#get-endpointnamedocs","title":"GET <code>/:endpointName/:docs</code>","text":"<ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>docs</code>: is the list of documents to get, separated by a comma if multiple docs</li> </ul>"},{"location":"services/git-service/#example","title":"Example","text":"<p>This path is using the <code>github</code> endpoint to get the <code>README.md</code> in the repository <code>krateoplatformops/krateo</code></p> <pre><code>github/%5Bkrateoplatformops%5D%5Bkrateo%5DREADME.md\n</code></pre> <p>as you can see the docs list is encoded in the path.</p>"},{"location":"services/git-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"name\": \"README.md\",\n      \"content\": \"PGltZyBzcmM9ImRvY3MvbWVkaWEvbG9nby5zdmciIGFsdD0iS3JhdGVvIFBs\\nYXRmb3Jtb3BzIiB3aWR0aD0iNDAwIj4KCioqS3JhdGVvIFBsYXRmb3Jtb3Bz\\nKiogaXMgYW4gb3BlbiBzb3VyY2UgdG9vbCwgYmFzZWQgb24gQ05DRiBwcm9q\\nZWN0cyBzdWNoIGFzIEt1YmVybmV0ZXMgYW5kIENyb3NzcGxhbmUsIHRoYXQg\\nZ2l2ZXMgdXNlcnMgdGhlIGNhcGFiaWxpdHkgdG8gY3JlYXRlIGFueSBkZXNp\\ncmVkIHJlc291cmNlIG9uIGJhc2ljYWxseSBhbnkgaW5mcmFzdHJ1Y3R1cmUg\\ndGhleSdkIGxpa2UuIEJlIGl0IGEgSzhzIGNsdXN0ZXIsIG1pY3Jvc2Vydmlj\\nZSwgYXBwbGljYXRpb24sIHBpcGVsaW5lLCBkYXRhYmFzZSBvciBhbnl0aGlu\\nZyBlbHNlLCBLcmF0ZW8gaGFzIGdvdCB5b3VyIGJhY2suIFRoZSBvbmx5IHJl\\ncXVpcmVtZW50IGlzIGZvciB0aGUgcmVzb3VyY2UgdG8gYmUgZGVzY3JpcHRp\\nYmxlIHZpYSBhIFlBTUwgZmlsZSByZXByZXNlbnRpbmcgdGhlIHJlc291cmNl\\nJ3MgX2Rlc2lyZWQgc3RhdGVfIChyaW5ncyBhIGJlbGw/IPCfmIkpLgoKS3Jh\\ndGVvIGFsbG93cyBmb3I6CgotICoqQ3JlYXRpbmcgYW55IGtpbmQgb2YgcmVz\\nb3VyY2VzIHdpdGhpbiBhbmQgb3V0c2lkZSB0aGUgS3ViZXJuZXRlcyBjbHVz\\ndGVyIGl0IHJ1bnMgb24qKjogd2hpbHN0IEtyYXRlbyBydW5zIGFzIGEgRGVw\\nbG95bWVudCBpbiBhIEt1YmVybmV0ZXMgY2x1c3RlciwgaXQgY2FuIGFsc28g\\nY3JlYXRlIHJlc291cmNlcyBfb3V0c2lkZV8gdGhlIGNsdXN0ZXIuIFlvdSBj\\nYW4gdXNlIEtyYXRlbyB0byBjcmVhdGUgYW55dGhpbmcgZnJvbSBuZXcgS3Vi\\nZXJuZXRlcyBjbHVzdGVycywgTG9nc3Rhc2ggcGlwZWxpbmVzLCBEb2NrZXIg\\ncmVnaXN0cmllcywgQVBJIGdhdGV3YXlzLCBhbmQgbWFueSBvdGhlcnMuCi0g\\nKipGb2N1c2luZyBvbiB0aGUgbWFuYWdlbWVudCBvZiBzZXJ2aWNlcyoqOiB0\\naGFua3MgdG8gW0Nyb3NzcGxhbmVdKGh0dHBzOi8vY3Jvc3NwbGFuZS5pbykg\\nYW5kIHRvIFtCYWNrc3RhZ2VdKGh0dHBzOi8vYmFja3N0YWdlLmlvLyksIEty\\nYXRlbyBmcmVlcyB0aGUgdXNlciBmcm9tIG1vc3Qgb2YgdGhlIGJ1cmRlbiBv\\nZiBjbHVzdGVyIG1hbmFnZW1lbnQsIGdpdmluZyB0aGVtIHRoZSBhYmlsaXR5\\nIHRvIGVudGlyZWx5IGZvY3VzIG9uIHRoZSBzZXJ2aWNlcyB0aGF0IG11c3Qg\\nYmUgcnVuLiBXaGlsZSB0aGUgaW5mcmFzdHJ1Y3R1cmUgaXMgbWFuYWdlZCBi\\neSBDcm9zc3BsYW5lLCB0aGUgcmVzb3VyY2VzIHRvIGJlIGRlcGxveWVkIGNh\\nbiBiZSBlYXNpbHkgZm91bmQgYW5kIGNvbmZpZ3VyZWQgaW4gQmFja3N0YWdl\\nJ3MgVUksIHdoaWNoIGFjdHMgYXMgYSBjYXRhbG9nIG9mIHJlYWR5LXRvLXVz\\nZSBzZXJ2aWNlcy4gVGhpcyByZXN1bHRzIGEgcGhlbm9tZW5hbCB1c2VyIGV4\\ncGVyaWVuY2UgdGhhdCBkcmFzdGljYWxseSByZWR1Y2VzIHdhc3RlcyBvZiB0\\naW1lLgotICoqU2luZ2xlLWhhbmRlZGx5IG1vbml0b3JpbmcgYW5kIGNvbnRy\\nb2xsaW5nIHJlc291cmNlcyoqOiBLcmF0ZW8gYWxzbyBhY3RzIGFzIGEgY2Vu\\ndHJhbGl6ZWQgY29udHJvbHBsYW5lLCBsZXR0aW5nIHVzZXJzIG1vbml0b3Ig\\nYW55dGhpbmcgcmFuZ2luZyBmcm9tIENJL0NEIHBpcGVsaW5lcyB0byBwb2Qg\\nc3RhdHVzZXMgYW5kIG9wZW4gdGlja2V0cyBvbiB5b3VyIEpJUkEuIEFsbCB0\\naGUgaW5mb3JtYXRpb24geW91IG5lZWQgaXMgcHJlc2VudCBvbiBhIHNpbmds\\nZSBwYWdlIC0tIHlvdSdsbCBuZXZlciBoYXZlIHRvIGd1ZXNzIHRoZSBjb3Jy\\nZWN0IGRhc2hib2FyZCBldmVyIGFnYWluLgoKIyMgT3VyIG1pc3Npb24KCldp\\ndGggS3JhdGVvLCB3ZSBhaW0gYXQgcHV0dGluZyB0b2dldGhlciBtYW55IGF3\\nZXNvbWUgdG9vbHMgZnJvbSB0aGUgQ05DRiBsYW5kc2NhcGUgdG8gcHJvdmlk\\nZSBvdXIgdXNlcnMgd2l0aCBhIHNpbXBsZS10by11c2UsIGNvbXBsZXRlIGFu\\nZCBtb2R1bGFyIHBsYXRmb3JtIHRoYXQgYWxsb3dzIGZvciBjcmVhdGluZyBy\\nZXNvdXJjZXMgb24gYW55IGluZnJhc3RydWN0dXJlLiBXZSBzZWUgS3JhdGVv\\nIGFzIGEgcG93ZXJmdWwgdG9vbCB0aGF0IGltcHJvdmVzIHRoZSB3b3JrZmxv\\ndyBvZiB0ZWFtcyBieSBkZWZpbmluZyBjbGVhciByb2xlcyBpbiB3aGljaCB0\\naGUgaW5mcmFzdHJ1Y3R1cmUgdGVhbSBjcmVhdGVzIHRoZSByZXNvdXJjZSB0\\nZW1wbGF0ZXMgbmVlZGVkIGJ5IHRoZSBkZXZlbG9wZXJzLCBhbmQgdGhlIGRl\\ndmVsb3BlcnMgYXJlIHRoZSBmaW5hbCB1c2VycyB0aGF0IHVzZSB0aG9zZSB0\\nZW1wbGF0ZXMgYW5kIGNhbiBtYW5hZ2UgdGhlIGxpZmVjeWNsZSBvZiB0aGUg\\nY3JlYXRlZCByZXNvdXJjZXMgZnJvbSBhIHNpbXBsZSwgdW5pZmllZCBkYXNo\\nYm9hcmQuCgpJbiBvdXIgdmlzaW9uLCBLcmF0ZW8gaXM6CgotIGEgX3NlbGYt\\nc2VydmljZSBwbGF0Zm9ybV8sIHdoZXJlIHVzZXJzIGNhbiBhdXRvbm9tb3Vz\\nbHkgY2hvb3NlIHdoYXQgdG8gY3JlYXRlIGFuZCB3aGVyZTsKLSBhIGNvbXBs\\nZXRlIF9jb250cm9scGxhbmVfIHRoYXQgZWFzZXMgYW5kIGNlbnRyYWxpemVz\\nIG1hbnkgcHJvY2Vzc2VzLCBwdXR0aW5nIGFsbCB0aGUgcmVsZXZhbnQgaW5m\\nb3JtYXRpb24gaW4gYSBzaW5nbGUgcGFnZSByYXRoZXIgdGhhbiBkaXN0cmli\\ndXRpbmcgaXQgb24gdGVucyBvZiBkaWZmZXJlbnQgbG9jYXRpb25zOwotIGEg\\nX211bHRpLWNsb3VkIHByb3ZpZGVyXyB0b29sOiBpdCB3b3JrcyB3aXRoIGFs\\nbCB0aGUgbWFqb3IgY2xvdWQgcHJvdmlkZXJzIGFuZCB3aXRoIG9uLXByZW0g\\naW5zdGFsbGF0aW9uczsKLSBlaXRoZXIgbWFuYWdlZCBvciBlYXNpbHkgaW5z\\ndGFsbGFibGUgb24geW91ciBleGlzdGluZyBLdWJlcm5ldGVzIGNsdXN0ZXIu\\nCgojIyBHZXR0aW5nIHN0YXJ0ZWQKCkJlZm9yZSBpbnN0YWxsIEtyYXRlbywg\\ncGxlYXNlIHZlcmlmeSBvdXIgW3JlcXVpcmVtZW50c10oLi9kb2NzL1JFUVVJ\\nUkVNRU5UUy5tZCkuCgpHZXR0aW5nIHN0YXJ0ZWQgd2l0aCBLcmF0ZW8gaXMg\\nYXMgZWFzeSBhcyBmb2xsb3dpbmcgaXRzIFtpbnN0YWxsYXRpb24gaW5zdHJ1\\nY3Rpb25zXSguL2RvY3MvSU5TVEFMTC5tZCkuCgojIyBSZWZlcmVuY2UgYXJj\\naGl0ZWN0dXJlCgpXZSBhcmUgYXdhcmUgd2UgaGF2ZSBtZW50aW9uZWQgbWFu\\neSBkaWZmZXJlbnQgc29mdHdhcmUgY29tcG9uZW50cyBzbyBmYXIsIHRodXMg\\nd2Ugc2VlIHdoeSB5b3UgbWF5IGJlIGEgdGFkIGNvbmZ1c2VkLiBJbiBzdW1t\\nYXJ5LCBLcmF0ZW8nIHJlZmVyZW5jZSBhcmNoaXRlY3R1cmUgY2FuIGJlIGRl\\ncGljdGVkIGFzIGZvbGxvd3M6Cgo8aW1nIHNyYz0iZG9jcy9tZWRpYS9yZWZl\\ncmVuY2VfYXJjaGl0ZWN0dXJlLnBuZyIgd2lkdGg9IjcwMHB4IiBhbHQ9IlJl\\nZmVyZW5jZSBhcmNoaXRlY3R1cmUiLz4KCiMjIEhvdyBkb2VzIGl0IHdvcms/\\nCgo8aW1nIHNyYz0iZG9jcy9tZWRpYS9ob3dfZG9lc19pdF93b3JrLnBuZyIg\\nd2lkdGg9IjcwMHB4IiBhbHQ9IkhvdyBkb2VzIGl0IHdvcmsiLz4K\\n\"\n    }\n  ],\n  \"count\": 1\n}\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/keptn-service/","title":"Keptn Service","text":"<p>This is a template for a Keptn service. You can find more info about Keptn services in the Keptn docs.</p>"},{"location":"services/keptn-service/#routes","title":"Routes","text":""},{"location":"services/keptn-service/#get-projectendpointname","title":"GET <code>/project/:endpoint/:name</code>","text":"<p>This route is used to get the project with the given name.</p> <ul> <li><code>endpointName</code>: the name of the endpoint</li> <li><code>name</code>: it the name of the project on Keptn</li> </ul>"},{"location":"services/keptn-service/#example","title":"Example","text":"<pre><code>/project/keptn/krateo-prj\n</code></pre>"},{"location":"services/keptn-service/#post-triggerendpointname","title":"POST <code>/trigger/:endpoint/:name</code>","text":""},{"location":"services/keptn-service/#example_1","title":"Example","text":"<pre><code>/trigger/keptn/krateo-prj\n</code></pre> <pre><code>{\n  \"contenttype\": \"application/json\",\n  \"type\": \"`sh.keptn.event.stage.sequence.triggered`\",\n  \"source\": \"bridge\",\n  \"data\": {\n    \"project\": \"project\",\n    \"stage\": \"stage\",\n    \"service\": \"service\"\n  }\n}\n</code></pre>"},{"location":"services/keptn-service/#response","title":"Response","text":"<pre><code>{ \"message\": \"Event triggered\" }\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/kubernetes-service/","title":"Kubernetes Service","text":"<p>This service scan kubernetes cluster using a label selector</p>"},{"location":"services/kubernetes-service/#routes","title":"Routes","text":""},{"location":"services/kubernetes-service/#get-selectorparams","title":"GET <code>/:selector/:params?</code>","text":"<ul> <li><code>selector</code> is the label selector to use</li> <li><code>params</code> is an additional list of resources to scan (array of strings)</li> </ul> <p>The resources are taken from this 2 files:</p> <ul> <li>resources.json</li> <li>crd.json</li> </ul>"},{"location":"services/kubernetes-service/#example","title":"Example","text":"<p>Here we are looking for all resource with the label <code>deploymentId=b367d339-d848-446f-aee4-963a6e3cc0c1</code></p> <pre><code>/deploymentId=b367d339-d848-446f-aee4-963a6e3cc0c1\n</code></pre>"},{"location":"services/kubernetes-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"kind\": \"Object\",\n      \"icon\": \"crd\",\n      \"items\": [ {...} ]\n    },\n    {\n      \"kind\": \"ProviderConfig\",\n      \"icon\": \"crd\",\n      \"items\": [ {...} ]\n    },\n    {\n      \"kind\": \"Repo\",\n      \"icon\": \"crd\",\n      \"items\": [ {...}, {...} ]\n    },\n    {\n      \"kind\": \"configmap\",\n      \"icon\": \"cm\",\n      \"items\": [ {...} ]\n    }\n  ],\n  \"count\": 4\n}\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/notification-service/","title":"Notification Service","text":"<p>This service is used to receive and send notifications to the App.</p>"},{"location":"services/notification-service/#ws","title":"WS <code>/</code>","text":"<p>This endpoint is used to connect by web socket to the Krateo App.</p>"},{"location":"services/notification-service/#post","title":"POST <code>/</code>","text":"<p>This endpoint receives a JSON to push by socket.io to the Krateo App.</p>"},{"location":"services/notification-service/#example","title":"Example","text":"<p>This is a sample payload:</p> <pre><code>{\n  \"message\": \"Hello World\",\n  \"time\": 1652260914,\n  \"level\": \"debug\",\n  \"reason\": \"test\",\n  \"source\": \"insomnia\",\n  \"deploymentId\": \"62ab322906b13e186722a1ad\"\n}\n</code></pre>"},{"location":"services/notification-service/#response","title":"Response","text":"<pre><code>{\n  \"message\": \"ok\"\n}\n</code></pre>"},{"location":"services/pipeline-service/","title":"Pipeline Service","text":"<p>This service is used to retrieve information about pipelines.</p> <p>Currently, we support this tipe of pipelines:</p> <ul> <li>GitHub</li> <li>Jenkins</li> </ul>"},{"location":"services/pipeline-service/#routes","title":"Routes","text":""},{"location":"services/pipeline-service/#get-endpointnamepipelines","title":"GET <code>/:endpointName/:pipelines</code>","text":"<ul> <li><code>endpointName</code> is the name of the endpoint to use</li> <li><code>pipelines</code> is the list of pipelines to retrieve, separated by a comma if multiple pipelines</li> </ul>"},{"location":"services/pipeline-service/#example","title":"Example","text":"<pre><code>github/%5Bkrateoplatformops%5D%5Bguest-fire-firefire%5DBuild%20Docker%20image%20for%20every%20commit\n</code></pre> <p>as you can see the pipeline list is encoded in the path.</p>"},{"location":"services/pipeline-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"pipeline\": {\n        \"id\": 40226801,\n        \"name\": \"Build Docker image for every commit\",\n        \"icon\": \"fa-brands fa-github\",\n        \"link\": \"https://github.com/krateoplatformops/guest-fire-firefire/blob/main/.github/workflows/docker-build.yaml\"\n      },\n      \"runs\": [\n        {\n          \"id\": 3443489775,\n          \"branch\": \"main\",\n          \"url\": \"https://github.com/krateoplatformops/guest-fire-firefire/actions/runs/3443489775\",\n          \"status\": \"failure\",\n          \"time\": 1668154209,\n          \"message\": \":rocket: first commit\",\n          \"duration\": 28\n        }\n      ]\n    }\n  ],\n  \"count\": 1\n}\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/provider-service/","title":"Provider Service","text":"<p>This service allows you to add/delete o list providers.</p>"},{"location":"services/provider-service/#routes","title":"Routes","text":""},{"location":"services/provider-service/#get","title":"GET <code>/</code>","text":"<p>Returns a list of providers.</p>"},{"location":"services/provider-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"kind\": \"Provider\",\n      \"icon\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzNy45IDM4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzNy45IDM4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzAzQTlGNDt9Cgkuc3Qxe2ZpbGw6IzgxRDRGQTt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yOS40LDM4SDguNkMzLjksMzgsMCwzNC4xLDAsMjkuNFY4LjZDMCwzLjksMy45LDAsOC42LDBoMjAuN2M0LjgsMCw4LjYsMy45LDguNiw4LjZ2MjAuNwoJQzM4LDM0LjEsMzQuMSwzOCwyOS40LDM4eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzEsMjkuNmMyLjUtMi44LDQtNi41LDQtMTAuNnMtMS41LTcuNy00LTEwLjZsMi44LTIuOGwwLDBsMi40LTIuNGMtMC40LTAuNS0wLjktMS0xLjQtMS40TDI5LjYsNwoJQzI2LjcsNC41LDIzLjEsMywxOSwzUzExLjMsNC41LDguNCw3TDMuMywxLjljLTAuNSwwLjQtMSwwLjktMS40LDEuNEw3LDguNEM0LjUsMTEuMywzLDE0LjksMywxOXMxLjUsNy43LDQsMTAuNmwtNS4xLDUuMQoJYzAuNCwwLjUsMC45LDEsMS40LDEuNGwyLjQtMi40bDAsMGwyLjgtMi44YzIuOCwyLjUsNi41LDQsMTAuNiw0czcuNy0xLjUsMTAuNi00bDUuMSw1LjFjMC41LTAuNCwxLTAuOSwxLjQtMS40TDMxLDI5LjZ6IE0zMywxOQoJYzAsMy41LTEuMyw2LjctMy40LDkuMkwyNiwyNC42YzEuMi0xLjUsMi0zLjUsMi01LjZzLTAuNy00LjEtMi01LjZsMy41LTMuNUMzMS43LDEyLjMsMzMsMTUuNSwzMywxOXogTTEyLDE5YzAtMS42LDAuNS0zLDEuNC00LjIKCWw0LjIsNC4ybC00LjIsNC4yQzEyLjUsMjIsMTIsMjAuNiwxMiwxOXogTTE5LDE3LjZsLTQuMi00LjJDMTYsMTIuNSwxNy40LDEyLDE5LDEyczMsMC41LDQuMiwxLjRMMTksMTcuNnogTTE5LDIwLjRsNC4yLDQuMgoJQzIyLDI1LjUsMjAuNiwyNiwxOSwyNnMtMy0wLjUtNC4yLTEuNEwxOSwyMC40eiBNMjAuNCwxOWw0LjItNC4yQzI1LjUsMTYsMjYsMTcuNCwyNiwxOXMtMC41LDMtMS40LDQuMkwyMC40LDE5eiBNMTksNQoJYzMuNSwwLDYuNywxLjMsOS4yLDMuNEwyNC42LDEyYy0xLjUtMS4yLTMuNS0yLTUuNi0ycy00LjEsMC43LTUuNiwyTDkuOSw4LjVDMTIuMyw2LjMsMTUuNSw1LDE5LDV6IE01LDE5YzAtMy41LDEuMy02LjcsMy40LTkuMgoJbDMuNSwzLjVjLTEuMiwxLjUtMiwzLjUtMiw1LjZzMC43LDQuMSwyLDUuNkw4LjQsMjhDNi4zLDI1LjcsNSwyMi41LDUsMTl6IE0xOSwzM2MtMy41LDAtNi43LTEuMy05LjItMy40bDMuNS0zLjUKCWMxLjUsMS4yLDMuNSwyLDUuNiwyczQuMS0wLjcsNS42LTJsMy41LDMuNUMyNS43LDMxLjcsMjIuNSwzMywxOSwzM3oiLz4KPC9zdmc+Cg==\",\n      \"name\": \"provider-aws\",\n      \"version\": \"v0.33.0\",\n      \"healthy\": \"True\"\n    }\n  ],\n  \"count\": 1\n}\n</code></pre>"},{"location":"services/provider-service/#post","title":"POST <code>/</code>","text":"<p>With this route you can apply json code to the cluster for to install a new provider.</p> <p>The json is downloaded from the catalog repository and applied to the cluster.</p>"},{"location":"services/provider-service/#example","title":"Example","text":"<pre><code>{\n  \"apiVersion\": \"pkg.crossplane.io/v1\",\n  \"kind\": \"Provider\",\n  \"metadata\": {\n    \"name\": \"provider-typeform\"\n  },\n  \"spec\": {\n    \"package\": \"ghcr.io/krateoplatformops/provider-git:v1.2.5\",\n    \"packagePullPolicy\": \"IfNotPresent\"\n  }\n}\n</code></pre>"},{"location":"services/provider-service/#response_1","title":"Response","text":"<pre><code>{ \"message\": \"Created 1 resources of 1\" }\n</code></pre>"},{"location":"services/provider-service/#delete","title":"DELETE <code>/</code>","text":"<p>This router is used to delete a provider from the cluster.</p>"},{"location":"services/provider-service/#example_1","title":"Example","text":"<pre><code>{ \"name\": \"provider-typeform\", \"kind\": \"Provider\" }\n</code></pre>"},{"location":"services/provider-service/#response_2","title":"Response","text":"<p><code>status code 200</code></p> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/secret-service/","title":"Secret Service","text":""},{"location":"services/secret-service/#get-group","title":"GET <code>/:group</code>","text":"<p>This route returns a list of secrets in the group.</p> <p>The available groups are:</p> <ul> <li>secret</li> <li>endpoint</li> </ul>"},{"location":"services/secret-service/#example","title":"Example","text":"<pre><code>/endpoint\n</code></pre>"},{"location":"services/secret-service/#response","title":"Response","text":"<pre><code>{\n  \"list\": [\n    {\n      \"metadata\": {\n        \"name\": \"argocd-endpoint\",\n        \"namespace\": \"krateo-system\",\n        \"group\": \"endpoint\",\n        \"uid\": \"51b5b4ec-d198-42af-b2a8-ac999579cc96\",\n        \"icon\": \"fa-solid fa-charging-station\",\n        \"type\": \"argocd\",\n        \"category\": \"delivery\"\n      },\n      \"friendlyName\": \"argocd\",\n      \"target\": \"http://argo-argocd-server.krateo-system.svc\"\n    }\n  ],\n  \"count\": 1\n}\n</code></pre>"},{"location":"services/secret-service/#get-groupname","title":"GET <code>/:group/:name</code>","text":"<p>This route is the same of the above, but return only one secret/endpoint and it return all the data (sensitive data).</p>"},{"location":"services/secret-service/#example_1","title":"Example","text":"<pre><code>/secret/sample\n</code></pre>"},{"location":"services/secret-service/#response_1","title":"Response","text":"<pre><code>{\n  \"metadata\": {\n    \"name\": \"sample-secret\",\n    \"namespace\": \"krateo-system\",\n    \"group\": \"secret\",\n    \"uid\": \"3f60dad4-8963-49df-8bab-5edb672de67f\",\n    \"icon\": \"fa-solid fa-toilet-paper\",\n    \"type\": \"custom\"\n  },\n  \"friendlyName\": \"sample\",\n  \"data\": { \"sample_key\": \"sample_value\" }\n}\n</code></pre>"},{"location":"services/secret-service/#post-group","title":"POST <code>/:group</code>","text":"<p>This route is used to create a new secret/endpoint.</p>"},{"location":"services/secret-service/#example_2","title":"Example","text":"<pre><code>/secret\n</code></pre> <pre><code>{\n  \"icon\": \"fa-solid fa-toilet-paper\",\n  \"name\": \"sample\",\n  \"type\": \"custom\",\n  \"secret\": { \"sample_key\": \"sample_val\" }\n}\n</code></pre>"},{"location":"services/secret-service/#response_2","title":"Response","text":"<pre><code>{\n  \"metadata\": {\n    \"name\": \"sample-secret\",\n    \"namespace\": \"krateo-system\",\n    \"group\": \"secret\",\n    \"uid\": \"e18442a5-1986-486d-92a8-5104da846822\",\n    \"icon\": \"fa-solid fa-toilet-paper\",\n    \"type\": \"custom\"\n  },\n  \"friendlyName\": \"sample\"\n}\n</code></pre>"},{"location":"services/secret-service/#delete-groupname","title":"DELETE <code>/:group/:name</code>","text":"<p>This route is used to delete a secret/endpoint.</p>"},{"location":"services/secret-service/#example_3","title":"Example","text":"<pre><code>/secret/sample\n</code></pre>"},{"location":"services/secret-service/#response_3","title":"Response","text":"<pre><code>{ \"message\": \"Secret sample deleted\" }\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"services/template-service/","title":"Template Service","text":"<p>This service is used to manage templates.</p>"},{"location":"services/template-service/#routes","title":"Routes","text":""},{"location":"services/template-service/#get","title":"GET <code>/</code>","text":"<p>Returns a list of all templates.</p>"},{"location":"services/template-service/#response","title":"Response","text":"<pre><code>{\n   \"list\":[\n      {\n         \"apiVersion\":\"deployment.krateo.io/v1alpha1\",\n         \"kind\":\"FireworksApp\",\n         \"metadata\":{\n            \"labels\":{\n               \"crossplane.io/composite\":\"firefire-fireworksapp\"\n            },\n            \"name\":\"firefire-fireworksapp\",\n            \"uid\":\"b367d339-d848-446f-aee4-963a6e3cc0c1\"\n         },\n         \"spec\":{\n            \"compositionRef\":{\n               \"name\":\"fireworksapp.deployment.krateo.io\"\n            },\n            \"compositionUpdatePolicy\":\"Automatic\",\n            \"description\":\"Fireworks App Deployment\",\n            \"icon\":\"fa-solid fa-fire\",\n            \"links\":[\n              {...}\n            ],\n            \"owner\":\"mauro\",\n            \"plugins\":[\n               {...}\n            ],\n            \"resourceRefs\":[\n               {...}\n            ],\n            \"tags\":[\n               \"fireworks\",\n               \"template\",\n               \"krateo\",\n               \"katy perry\"\n            ],\n            \"title\":\"firefire\",\n            \"values\": {...}\n         }\n      }\n   ],\n   \"count\":1\n}\n</code></pre>"},{"location":"services/template-service/#get-namename","title":"GET <code>/name/:name</code>","text":"<p>Get a template by name.</p>"},{"location":"services/template-service/#get-uiduid","title":"GET <code>/uid/:uid</code>","text":"<p>Get a template by uid.</p>"},{"location":"services/template-service/#post","title":"POST <code>/</code>","text":"<p>This route is used to create a new template or refresh an existing template.</p>"},{"location":"services/template-service/#example","title":"Example","text":"<pre><code>{\n  \"url\": \"https://github.com/krateoplatformops/krateo-template-fireworksapp/blob/main/template.yaml\",\n  \"endpointName\": \"github\"\n}\n</code></pre>"},{"location":"services/template-service/#response_1","title":"Response","text":"<pre><code>{\n   \"apiVersion\":\"krateo.io/v1alpha1\",\n   \"kind\":\"Template\",\n   \"metadata\":{\n      \"name\":\"krateo-fireworks\",\n      \"uid\":\"385e9004-1717-4065-989a-34fb122a6de1\"\n   },\n   \"spec\":{\n      \"description\":\"Krateo Fireworks Template\",\n      \"endpointName\":\"github\",\n      \"icon\":\"fa-solid fa-fire\",\n      \"owner\":\"unknown\",\n      \"tags\":[\n         \"fireworks\",\n         \"template\",\n         \"krateo\",\n         \"katy perry\"\n      ],\n      \"title\":\"Krateo Fireworks\",\n      \"url\":\"https://github.com/krateoplatformops/krateo-template-fireworksapp/blob/main/template.yaml\",\n      \"widgets\":[ {...} ]\n   }\n}\n</code></pre>"},{"location":"services/template-service/#delete-namename","title":"DELETE <code>/name/:name</code>","text":"<p>Delete a template by name.</p>"},{"location":"services/template-service/#example_1","title":"Example","text":"<pre><code>/name/my-awesome-template\n</code></pre>"},{"location":"services/template-service/#response_2","title":"Response","text":"<pre><code>{ \"message\": \"Template with name my-awesome-template deleted\" }\n</code></pre> <p>Note</p> <p>Services respond with valid JSON, so, if the response is an array, it will be wrapped in the <code>list</code> property.</p> <p>If the response contains the <code>list</code> proerty it will add the property <code>count</code> with the number of items in the list.</p>"},{"location":"tools/eventrouter-kafka-producer/","title":"Eventrouter Kafka Producer","text":"<p>EventRouter consumer microservice dispatching cloudevents to Kafka.</p> <p>It expose two endpoints:</p> <ul> <li><code>/healthz</code> - health check endpoint (GET)</li> <li><code>/handle</code> - eventrouter hook endpoint (POST)</li> </ul>"},{"location":"tools/eventrouter-kafka-producer/#how-to-install","title":"How to install","text":"<pre><code>$ helm repo add krateo https://charts.krateo.io\n$ helm repo update krateo\n$ helm install eventrouter-kafka-producer krateo/eventrouter-kafka-producer --namespace krateo-system --create-namespace\n</code></pre>"},{"location":"tools/eventrouter-kafka-producer/#env-vars","title":"Env Vars","text":"Name Description Default Value EVENTROUTER_KAFKA_PRODUCER_PORT port to listen on 8080 EVENTROUTER_KAFKA_PRODUCER_DEBUG dump verbose output false EVENTROUTER_KAFKA_PRODUCER_BROKERS comma separated list of kafka brokers 127.0.0.1:9092 EVENTROUTER_KAFKA_PRODUCER_TOPIC send events to this Kafka topic test-topic"},{"location":"tools/eventrouter-kafka-producer/#registering-with-the-eventrouter","title":"Registering with the EventRouter","text":"<p>To register this service with the eventrouter apply a manifest like this:</p> <pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: eventrouter.krateo.io/v1alpha1\nkind: Registration\nmetadata:\n  name: kafka-producer-registration\nspec:\n  serviceName: Kafka Producer\n  # Your custom hook service endpoint\n  endpoint: https://this.service.addr:8080/handle\nEOF\n</code></pre>"},{"location":"tools/eventrouter/","title":"EventRouter","text":"<p>This service serves as an active watcher of event resource in the kubernetes system, which takes those events and pushes them to a user specified HTTP hook (called Registration).</p> <p>this service will POST to the specified endpoint a JSON containing the event info.</p> <p>Here a sample event info:</p> <pre><code>{\n    \"type\":\"Warning\",\n    \"reason\":\"CannotCreateExternalResource\",\n    \"deploymentId\":\"XXXXXXAAA1212121\",\n    \"time\":1660835529,\n    \"message\":\"cannot create EKS node group: ResourceInUseException: Cluster: test-1 is not in a valid state\",\n    \"source\":\"managed/nodegroup\",\n    \"involvedObject\":{\n       \"apiVersion\":\"eks.aws.crossplane.io/v1alpha1\",\n       \"kind\":\"NodeGroup\",\n       \"name\":\"test-1-ng\",\n       \"uid\":\"6365c158-8ee1-4d36-a33a-ba3cc0958ee0\"\n    },\n    \"metadata\":{\n       \"creationTimestamp\":\"2022-10-26T17:25:12+02:00\",\n       \"name\":\"test-1-ng.170c791ccd13d0cd\",\n       \"namespace\":\"default\",\n       \"uid\":\"6aa0a50b-1b5b-46e0-b5ec-a1118286f0c4\"\n    }\n}\n</code></pre>"},{"location":"tools/eventrouter/#how-to-install","title":"How to install","text":"<pre><code>$ helm repo add krateo https://charts.krateo.io\n$ helm repo update krateo\n$ helm install eventrouter krateo/eventrouter --namespace krateo-system --create-namespace\n</code></pre>"},{"location":"tools/eventrouter/#configuring-a-registration","title":"Configuring a Registration","text":"<p>To configure your hook in order to receive events info, create and apply a manifest with Registration resource:</p> <pre><code>cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: eventrouter.krateo.io/v1alpha1\nkind: Registration\nmetadata:\n  name: httpecho-registration\nspec:\n  # Your custom hook service name\n  serviceName: HTTP Echo\n  # Your custom hook service endpoint\n  endpoint: http://127.0.0.1:9090/handle\nEOF\n</code></pre> <p>In the above example the endpoint service at _ http://127.0.0.1:9090/handle_ will receive the eventhandler data.</p>"},{"location":"tutorials/add-endpoint/","title":"Add Endpoint","text":""},{"location":"tutorials/add-endpoint/#github-token","title":"GitHub Token","text":"<ol> <li>Go to GitHub Developer Settings</li> <li>On the left menu click on <code>Personal access tokens</code></li> <li>On the top right click on <code>Generate new token</code> (classic token should be fine)</li> <li>Here you can give the token a name and select the scopes you want to give it        Customize the expiration date to your needs.</li> </ol> <p>Grant repo permissions to the token.</p> <p>Add also the <code>delete_repo</code> permission and <code>write:packages</code> permission</p> <ol> <li>Copy the token and save it somewhere safe</li> </ol>"},{"location":"tutorials/add-endpoint/#add-the-token-to-krateo","title":"Add the token to Krateo","text":"<ol> <li>Login to Krateo</li> <li>Click on the left menu to <code>Settings</code></li> <li>On the menu in the right pane click on <code>Endpoints</code></li> <li>Click on the <code>plus button</code> to add a new endpoint (top right)</li> <li>Fill the form as this example    </li> <li><code>icon</code> is the icon you want to use for the endpoint</li> <li><code>Name</code> is the name of the endpoint</li> <li><code>Target</code> is the URL of the endpoint (if you use github.com you can use <code>https://api.github.com</code>)</li> <li><code>endpoint type</code> is github</li> <li><code>github token</code> is the token you created in the previous step</li> <li>If you have filled all the fields correctly you should see that the <code>Add Endpoint</code> button is now enabled</li> <li>Click on the <code>Add Endpoint</code> button to add the endpoint to Krateo</li> <li>Well done! You have added your first endpoint to Krateo</li> </ol>"},{"location":"tutorials/create-aws-stack/","title":"Create AWS Stack: EKS + RDS","text":"<p>Now you are ready to install something more interesting: a full stack on AWS! A kubernetes cluster (EKS) and a postgres db (RDS).</p>"},{"location":"tutorials/create-aws-stack/#get-credentials","title":"Get Credentials","text":"<p>First you need to get your AWS credentials. You can do this by following the AWS documentation.</p> <p>Credentials look like this:</p> <pre><code>[default]\naws_access_key_id=ASIBQ5CCZY5TRTFXGAET\naws_secret_access_key=7L/d3M92g/VWuNEL+2cAFCx91VcdEVaAr2lBl/30\naws_session_token=bVh2UEw3Q0ZkN0lEV2JjZXZLTUhZYTkxRHZZWGs1Z1NSM3UxVGYzVllNM2lzUjRKWTdwMXdqemlmbzFsOTA1N3hBV3p4NTgwZTJzTHRrWWd1bXF0akRFeVNaOE5DZkNZcTZ5d0hTSXpEUG1yaWM1VDJaY255bUtOSmNQSlpYTWNYMGRBNVBGTjByM1NrSVBZMUNvUFVvdHhKV2lKbXhoN3JOcE92UWxsaXlnbFA0ejg0aU03VUVhSERpYnNWSXBDMnhUd3lVYk9XRnoweWJuUXF0amdJZUxDZU80dG1DQXdqN0s0NWNYYWt6SDRSMEd1ZEtzQ0JHZUNrdWV6U2J3NkVNamxNQWdPYjJPeEVlSnIxS2ZzOFlNUk1GNDZIc0lqbjJrUnk0UENVMXZIc3NJcE5sRzJNNHF0UVdwSndXaVFqQ3ZLakdqS1B3TzFtUGZxOERSb09GS0ljbFN1dlowTFZDRkJWbTJZMkh2UjhyZlVHVHo2cmxOWVMyc3NvOGJMTE1rZTBrVkJHVFdSZXEyM0VnaXp1WHJLWkFPZ1V3NVQ5a0lrYVdIY0lhS25lME9TQVNuUHBpUGQwWkNiejVHRkk3dkNJaXRucG5aNnBWeVlnRG0xTW5aTlBzTElVM0pnUldxM0FHaExXQXV0Sm5pUXlSZFlaeDlWRGp5SGxTdFBmSlJMcElHajF6elV2ZGdwTU03UlQwN3JyVzVndHpmQ05WNjlJelNsVEFFZXBnQVIwMTk0ZjVrbE1MdGxidEZLcGFJSERDd0ROYk1EWjNFMGFCUkNGU2wyMWZBeDNickI0bG05a1dKc0swNk9XN1RvMFN4WjQ0THBvd2N2cExkNnhRbFo1b2tVMzNjeUZUeFJoWmpkQzUzMGlMR1pSMGIzNVlYbHpwektoVlVtakRPNW1PbG8zU2o0T1VpaVdCaHNNOGxPblhTY0NGZEEzNFlhOEhrbE5DTGJqU29RZE5HTzFQSUVUQnJyVmwzMGFBYVB1VjJDVWZNMUZoWGFUbjd5ZWttYWtHM3E2Z1J2WmF4RjVFT2NTbGozVWNmNjZxZ3k5bEJNSkVwbWhFeGkwMnVwa0g2TXFoMXAzTXc1OFp2ZlRMOUNibFl3UTRLSjNPUE1iTElIakFqVFYxd1U5V09OYkZqUTlaZ0pRTzJ1OGkxbU5sRHlHaDVUYjFyQ2xUbUZsNGZUWU1BQ09GU0JmRVhQVTN5UUkwCg==\n</code></pre>"},{"location":"tutorials/create-aws-stack/#add-credentials-to-krateo","title":"Add Credentials to Krateo","text":"<p>Now you need to add your credentials to krateo. Here the required steps:</p> <ol> <li>Login to Krateo</li> <li>Go to the <code>settings</code> page</li> <li>On the right menu click on \"secrets\"</li> <li>Click on the plus button on the top right</li> <li>Fill the form with the following values:</li> </ol> <pre><code>name: aws-creds\nsecret type: provider aws\ncredentials: &lt;your credentials from previous step&gt;\n</code></pre> <p></p>"},{"location":"tutorials/create-aws-stack/#import-the-template","title":"Import the template","text":"<p>Now you can import the template. The AWS stack template is available here</p> <pre><code>https://github.com/krateoplatformops/krateo-template-awsstack/blob/main/template.yaml```\n</code></pre> <ol> <li>Login to Krateo</li> <li>Go to <code>register</code> page</li> <li>Add the url of the template in the form (here you must have already created the GitHub endpoint, if not, follow this tutorial)</li> <li>Click on <code>register</code> button</li> </ol>"},{"location":"tutorials/create-aws-stack/#install-the-required-provider","title":"Install the Required Provider","text":"<p>To deploy the stack you need to install some provider. You can do this by doing this:</p> <ol> <li>Login to Krateo</li> <li>Go to <code>packages</code> page</li> <li>Click on the <code>plus</code> button on the top right</li> </ol> <p></p> <ol> <li> <p>The required providers are:</p> </li> <li> <p><code>provider-aws</code></p> </li> <li><code>provider-git</code></li> <li> <p><code>provider-github</code></p> </li> <li> <p>Simply click on the <code>bottom right</code> button for each provider to install them</p> </li> </ol>"},{"location":"tutorials/create-aws-stack/#create-the-stack-use-the-template","title":"Create the stack (use the template)","text":"<p>The AWS Stack template has 4 steps</p> <ol> <li>Name and description: you can add the name of the deployment and a description    </li> <li>Kubernetes: set the name for the cluster and for the network. Be careful, AWS charges you for the resources you create, so you shouldn't set too many nodes.    </li> <li>Database: set the name of the database and other settings.    </li> <li>Git repository destination: set the name of the target repository and please set the corret organization name.    </li> </ol> <p>After you have filled the form, click on <code>deploy</code> button.</p>"},{"location":"tutorials/create-aws-stack/#check-the-deployment","title":"Check the deployment","text":"<p>After some seconds, on your AWS console you should see the new resources are in creating status.</p> <p> </p> <p>After a few minutes, the resources should be ready.</p> <p>Note</p> <p>Please note, if you delete the stack, the resources will be deleted too.</p> <p>If the resources will not be created after a few minutes, please check the logs of the deployment and your AWS credentials.</p>"},{"location":"tutorials/create-fireworks-app/","title":"Create Fireworks App","text":""},{"location":"tutorials/create-fireworks-app/#create-deployment","title":"Create Deployment","text":"<ol> <li>Login to Krateo</li> <li>Click on the left menu to <code>Templates</code></li> <li>If you have completed the previous steps you should see the template <code>Krateo Fireworks</code></li> <li>Click on the template card, and you will be redirect to the template form page</li> <li> <p>This template has only 4 steps, but 3 of these are already fulfilled, but you can customize them if you want</p> </li> <li> <p>Step 1: the name of the deployment</p> </li> <li>Step 2: how many replicas you want to set</li> <li>Step 3: how to expose application</li> <li> <p>Step 4, here it's time to config the deployment              In this example we are going to publish the deployment to <code>krateoplatformops</code> organization.</p> </li> <li> <p>If the form is valid, click on the <code>Publish</code> button</p> </li> <li>Now you have deployed your first application with Krateo! After a while navigate to the url you have set in the step 3, and you should see the fireworks application running.    </li> </ol>"},{"location":"tutorials/create-fireworks-app/#deployment-page","title":"Deployment Page","text":"<p>This deployment has 8 tabs:</p>"},{"location":"tutorials/create-fireworks-app/#overview","title":"Overview","text":"<p>Description and link to the repository you have created</p>"},{"location":"tutorials/create-fireworks-app/#resources","title":"Resources","text":"<p>Resource tree provided by ArgoCD </p>"},{"location":"tutorials/create-fireworks-app/#documentation","title":"Documentation","text":"<p>Here you will see the README.md file of the repository you have created. The content? Is the lyrics of the song \"Fireworks\" by Katy Perry</p>"},{"location":"tutorials/create-fireworks-app/#kubernetes","title":"Kubernetes","text":"<p>The list of components deployed in the cluster:  If you click on any component in the right pane you will see the yaml file of the component.</p>"},{"location":"tutorials/create-fireworks-app/#pipelines","title":"Pipelines","text":"<p>This deployment trigger a pipeline (GitHub action) to build the docker image. </p>"},{"location":"tutorials/create-fireworks-app/#events","title":"Events","text":"<p>Here you will see the events related to the deployment.</p>"},{"location":"tutorials/create-fireworks-app/#values","title":"Values","text":"<p>It shows the deployment.yaml file of the deployment.</p>"},{"location":"tutorials/create-fireworks-app/#settings","title":"Settings","text":"<p>If you are ready to delete the deployment, you can do it from here.</p>"},{"location":"tutorials/create-template/","title":"Create a template","text":"<p>As every yaml file, the template.yaml is composed by 4 main sections:</p> <ul> <li><code>apiVersion</code>: The version of the template</li> <li><code>kind</code>: The kind of the template</li> <li><code>metadata</code>: The metadata of the template</li> <li><code>spec</code>: The spec of the template</li> </ul> <p>This is a basic template.yaml file:</p> <pre><code>apiVersion: krateo.io/v1alpha1\nkind: Template\nmetadata:\nspec:\n</code></pre>"},{"location":"tutorials/create-template/#set-the-name","title":"Set the name","text":"<pre><code>metadata:\n  name: my-awesome-template\n</code></pre> <p>Note</p> <p>The name of the template must be unique in the cluster and is for kubernetes use only.</p>"},{"location":"tutorials/create-template/#set-the-basic-information","title":"Set the basic information","text":"<pre><code>spec:\n  owner: info@krateo.io\n  title: My Awesome Template\n  description: This is my first template\n  icon: fa-solid fa-mug-hot\n  tags:\n    - awesome\n    - template\n    - krateo\n    - coffee\n</code></pre> <p>Note</p> <p>Title, description, icon and tags are used in the Krateo App.</p>"},{"location":"tutorials/create-template/#set-the-widgets","title":"Set the widgets","text":"<p>Widgets are the steps in the template form.</p> <pre><code>widgets:\n  - title: Step 1\n    description: Step 1\n    properties:\n      - title: Name\n        key: name\n        description: Unique name of the component\n</code></pre>"},{"location":"tutorials/create-template/#now-you-can-import-the-template","title":"Now you can import the template","text":"<p>If you don't know how to import the template follow this guide.</p> <p>The template should be something like this:</p> <pre><code>apiVersion: krateo.io/v1alpha1\nkind: Template\nmetadata:\n  name: my-awesome-template\nspec:\n  owner: info@krateo.io\n  title: My Awesome Template\n  description: This is my first template\n  icon: fa-solid fa-mug-hot\n  tags:\n    - awesome\n    - template\n    - krateo\n    - coffee\n  widgets:\n    - title: Step 1\n      description: Step 1\n      properties:\n        - title: Name\n          key: name\n          description: Unique name of the component\n</code></pre> <p>And in Krateo you will see this:</p> <p></p> <p>The <code>deploy</code> button is enabled because there are no required fields.</p>"},{"location":"tutorials/create-template/#add-a-required-field-and-the-box-info","title":"Add a required field and the box info","text":"<pre><code>widgets:\n  - title: Step 1\n    description: Step 1\n    properties:\n      - title: Name\n        key: name\n        description: Unique name of the component\n        required: true\n        default: my-awesome-component\n      - value: Info box\n        type: box\n        style: success\n</code></pre> <p>After this, you can re-import the template and you will see this:</p> <p></p>"},{"location":"tutorials/create-template/#field-types","title":"Field types","text":"<p>As described here there are multiple type of fields.</p>"},{"location":"tutorials/create-template/#need-more-help","title":"Need more help?","text":"<p>You can find some examples on our GitHub organization github.com/krateoplatformops.</p>"},{"location":"tutorials/import-template/","title":"Import Template","text":""},{"location":"tutorials/import-template/#template-repository","title":"Template Repository","text":"<p>You can create your own or you can use the krateo template fireworks app provided by Krateo.</p> <p>Let's assume you will use the krateo fireworksapp template</p> <ol> <li>Go to this repository krateo template fireworks app</li> <li>In the root of the root of the repository click on the <code>template.yaml</code> file</li> <li>Copy the url of this file.</li> <li>Should be something like this: <code>https://github.com/krateoplatformops/krateo-template-fireworksapp/blob/main/template.yaml</code></li> </ol>"},{"location":"tutorials/import-template/#import-template_1","title":"Import Template","text":"<ol> <li>Login to Krateo</li> <li>Click on the left menu to <code>Register</code></li> <li>If you have successfully completed the previous step you should see the endpoint field filled in with the name of the endpoint you have created.</li> <li>Paste the full url of the <code>template.yaml</code> file in the <code>Full Url</code> field.    </li> <li>Now the <code>Import</code> button is enabled and you can import the template</li> <li>After the import you will be redirect to the templates page</li> <li>Great! You have successfully imported the template    </li> </ol>"}]}